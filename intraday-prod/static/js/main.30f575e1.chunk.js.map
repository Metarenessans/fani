{"version":3,"sources":["common/utils/params.js","context/AppReducer.js","common/tools.js","common/utils/fraction-length.js","context/GlobalState.js","utils/is-equal.js","utils/cropp-string.js","components/stack/index.js","components/cross-button/index.js","components/numeric-input/index.js","components/dialog/index.js","components/config/index.js","common/utils/format-number.js","components/PriceMove.js","components/DataInputs.js","utils/format.js","common/utils/sort-input-first.js","components/ToolRow.js","components/StepRow.js","components/ExtraStepInput.js","components/LoadTable.js","components/LoadTables.js","image/nanni.svg","App.js","index.js"],"names":["params","getHash","window","location","hash","substring","get","name","split","chunk","chunkName","chunkValue","replaceEntry","val","regexp","RegExp","search","length","replace","set","this","key","state","action","type","currentSaveIdx","customTools","investorInfo","deposit","status","skill","adrMode","iterationQty","stopValue","minYield","yieldStep","loadTables","selectedTools","code","toolType","loadValue","steps","extraSteps","guaranteeMode","tools","payload","snapshotIsChanged","snapshotIsSaved","pure","saves","save","console","log","updatedSaves","map","id","static","filteredSaves","filter","loading","tableIdx","updatedTable","newTool","JSON","parse","stringify","push","updatedLoadTables","table","idx","addTool","rowIdx","tables","updateTool","updatedTools","tool","toolIdx","deleteTool","value","updateLoadValue","updateSteps","columnIdx","setExtraStep","setGuaranteeMode","lastStep","lastExtraStep","newStep","toFixed","addStepColumn","updatedSteps","step","deleteExtraStep","error","template","ref","fullName","shortName","stepPrice","priceStep","averageProgress","guarantee","currentPrice","volume","lotSize","dollarRate","adrDay","adrWeek","adrMonth","points","Tool","toCopy","Object","keys","forEach","guaranteeValue","guaranteeExtracted","parseNumber","round","Error","options","long","str","String","fraction","number","match","exec","slice","fallback","result","Number","isNaN","parseTool","price","lotVolume","firstTradeDate","lastTradeDate","found","check","readyTools","strict","readyTool","lastCompareIndex","undefined","isFutures","toolCode","toLowerCase","readyToolCode","adr","filterFn","readyToolsNew","readyToolsMarch","readyToolsApril","fractionLength","matched","shouldBeSkipped","updateDate","Tools","parsedTools","unmatchedTools","rowData","merge","cloneDeep","update","c","a","charCodeAt","sorted","sort","b","l","toString","trim","r","res","i","Math","min","convert","index","codeA","numberA","codeB","numberB","trunc","toolInfo","create","indexOf","find","getSortProperty","alike","t","concat","n","max","initialState","email","Array","GlobalContext","createContext","GlobalProvider","children","useReducer","AppReducer","dispatch","err","response","data","futuresRequest","axios","sharesRequest","Promise","all","then","responses","sortedSaves","dateUpdate","expectedKeys","isMatch","includes","deleteSave","post","qs","message","depoValue","bool","Provider","setInitialState","setIsLoading","setCurrentSaveIdx","setCustomTools","getTools","getInvestorInfo","getSaves","getSave","addSave","updateSave","setLoadValue","setIterationQty","setStopValue","setMinYield","setYieldStep","setAdrMode","addLoadTable","deleteLoadTable","updateDeposit","isEqual","obj1","obj2","p","hasOwnProperty","croppString","len","end","substr","Stack","props","className","join","CrossButton","label","onClick","title","aria-label","e","role","viewBox","focusable","data-icon","width","height","fill","aria-hidden","d","isIPhone","test","navigator","userAgent","NumericInput","onInvalid","format","defaultValue","errMsg","positive","onRef","unsigned","prevProps","warn","setState","target","onChange","regexpCode","onFocus","before","after","lastChar","charAt","placeholder","onBlur","keyCode","blur","stopPropagation","safeProps","visible","inputMode","maxLength","onKeyDown","parsedValue","xmlns","React","Component","dialogAPI","element","querySelectorAll","elementToFocus","focusFirstElement","querySelector","getFocusableDescendants","focus","dialogs","document","event","dialogHTML","getCurrentDialog","dialogContentHTML","contains","lastFocus","focusLastDescendant","focusFirstDescendant","activeElement","closeLast","dialogID","initiator","getElementById","removeAttribute","body","classList","add","addEventListener","trapFocus","handleEscape","setAttribute","remove","removeEventListener","Dialog","memo","which","onClose","onConfirm","onCancel","callback","contentClassName","footer","hideFooter","confirmText","hideConfirm","confirmClass","cancelText","cancelClass","hideCancel","block","aria-modal","hidden","tabIndex","Config","createRef","showMax","changed","alertText","current","prevState","templateContructor","toolsInfo","insertBeforeDialog","alertId","uniqueProp","prop","getAllTools","nameExists","info","suffix","Infinity","scrollTop","open","onScroll","scrollTopMax","offsetHeight","style","minWidth","random","splice","close","nextProps","formatNumber","chunks","PriceMove","useContext","loadData","useEffect","setInterval","pageTitle","formSnapshot","disabled","onSelect","Option","LoadingOutlined","md","xs","Group","mode","href","overlayStyle","fontSize","SettingFilled","namesTaken","currentName","validate","errors","ValidatedInput","autoComplete","autoCorrect","autoCapitalize","spellCheck","vibeCheck","DataInputs","iterationQtyRef","useRef","stopValueRef","minYieldRef","yieldStepRef","useState","iterationQtyLocal","setIterationQtyLocal","stopValueLocal","setStopValueLocal","minYieldLocal","setMinYieldLocal","yieldStepLocal","setYieldStepLocal","parser","handleKeyboard","inputRef","gutter","lg","size","precision","onStep","formatter","numWithSpaces","sortInputFirst","searchVal","Select","ToolRow","x","selectRef","setSearchVal","priceStepPrecision","pop","optionFilterProp","dropdownStyle","fontFamily","optionIdx","showSearch","onSearch","option","contracts","adrValue","stop","StepRow","calcStepValues","stepNumber","stepPercent","stepLength","stepValues","extraStepValues","setColor","toolName","ExtraStepInput","stepValue","setStepValue","autoFocus","LoadTable","tableRef","stepsQty","load","matchedTools","selectedTool","KSUR","LONG","SHORT","KPUR","default","floor","toolsVisible","setToolsVisible","loadsVisible","setLoadsVisible","loadValueLocal","setLoadValueLocal","center","checkedChildren","unCheckedChildren","checked","scrollLeft","PlusOutlined","MinusOutlined","LoadTables","antIcon","spin","Loader","indicator","App","ReactDOM","render"],"mappings":"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","file":"static/js/main.30f575e1.chunk.js","sourcesContent":["var params = (function () {\r\n\r\n  function getHash() {\r\n    return window.location.hash.substring(1);\r\n  }\r\n\r\n  return {\r\n    get(name) {\r\n      for (let chunk of getHash().split(\"&\")) {\r\n        var chunkName  = chunk.split(\"=\")[0];\r\n        var chunkValue = chunk.split(\"=\")[1];\r\n        if (chunkName === name) {\r\n          return chunkValue;\r\n        }\r\n      }\r\n\r\n      return null;\r\n    },\r\n\r\n    replaceEntry(hash, name, val) {\r\n      let regexp = new RegExp(name + \"=[\\\\w\\\\d]+\");\r\n\r\n      if (hash.search(regexp) === -1) {\r\n        if (hash.length !== 0) {\r\n          hash += \"&\";\r\n        }\r\n\r\n        hash += name + \"=\" + val;\r\n      }\r\n      else {\r\n        hash = hash.replace(regexp, name + \"=\" + val);\r\n      }\r\n\r\n      return hash;\r\n    },\r\n\r\n    set(name, val) {\r\n      // debugger;\r\n      var hash = getHash();\r\n\r\n      if (typeof name == \"string\") {\r\n        hash = this.replaceEntry(hash, name, val);\r\n      }\r\n      else {\r\n        for (var key in name) {\r\n          hash = this.replaceEntry(hash, key, name[key])\r\n        }\r\n      }\r\n\r\n      window.location.hash = hash;\r\n    }\r\n  };\r\n})();\r\n\r\nexport default params;","import params from \"../common/utils/params\";\r\n\r\nexport default (state, action) => {\r\n  const addTool = ({ tableIdx }) => {\r\n    const updatedTable = [...state.loadTables][tableIdx];\r\n    const newTool = JSON.parse(JSON.stringify(updatedTable.selectedTools[0]));\r\n    updatedTable.selectedTools.push(newTool);\r\n\r\n    const updatedLoadTables = state.loadTables.map((table, idx) =>\r\n      idx !== tableIdx ? table : updatedTable\r\n    );\r\n    return {\r\n      ...state,\r\n      loadTables: updatedLoadTables,\r\n      snapshotIsChanged: true,\r\n      snapshotIsSaved: false,\r\n    };\r\n  };\r\n\r\n  const updateTool = ({ tableIdx, rowIdx, code, toolType }) => {\r\n    const tables = [...state.loadTables];\r\n    tables[tableIdx].selectedTools[rowIdx].code = code;\r\n    tables[tableIdx].selectedTools[rowIdx].toolType = toolType;\r\n\r\n    return tables;\r\n  };\r\n\r\n  const updateSteps = ({ tableIdx, steps }) => {\r\n    const tables = [...state.loadTables];\r\n    tables[tableIdx].steps = steps;\r\n\r\n    return tables;\r\n  };\r\n\r\n  const updateLoadValue = ({ tableIdx, value }) => {\r\n    const tables = [...state.loadTables];\r\n    tables[tableIdx].loadValue = value;\r\n\r\n    return tables;\r\n  };\r\n\r\n  const deleteTool = ({ tableIdx, rowIdx }) => {\r\n    const updatedTable = [...state.loadTables][tableIdx];\r\n    const updatedTools = updatedTable.selectedTools.filter(\r\n      (tool, toolIdx) => rowIdx !== toolIdx\r\n    );\r\n    updatedTable.selectedTools = updatedTools;\r\n\r\n    const updatedLoadTables = state.loadTables.map((table, idx) =>\r\n      idx !== tableIdx ? table : updatedTable\r\n    );\r\n\r\n    return {\r\n      ...state,\r\n      loadTables: updatedLoadTables,\r\n      snapshotIsChanged: true,\r\n      snapshotIsSaved: false,\r\n    };\r\n  };\r\n\r\n  const addStepColumn = ({ tableIdx }) => {\r\n    const updatedTable = [...state.loadTables][tableIdx];\r\n    const lastStep = +updatedTable.steps[updatedTable.steps.length - 1];\r\n    const lastExtraStep =\r\n      +updatedTable.extraSteps[updatedTable.extraSteps.length - 1];\r\n    let newStep = 0;\r\n\r\n    if (lastExtraStep) {\r\n      newStep = lastExtraStep + state.yieldStep;\r\n    } else {\r\n      newStep = lastStep + state.yieldStep;\r\n    }\r\n    updatedTable.extraSteps.push(+newStep.toFixed(2));\r\n\r\n    const updatedLoadTables = state.loadTables.map((table, idx) =>\r\n      idx !== tableIdx ? table : updatedTable\r\n    );\r\n    return {\r\n      ...state,\r\n      loadTables: updatedLoadTables,\r\n      snapshotIsChanged: true,\r\n      snapshotIsSaved: false,\r\n    };\r\n  };\r\n\r\n  const deleteExtraStep = ({ tableIdx, columnIdx }) => {\r\n    const updatedTable = [...state.loadTables][tableIdx];\r\n    const extraSteps = updatedTable.extraSteps;\r\n    const updatedSteps = extraSteps.filter((step, idx) => idx !== columnIdx);\r\n    updatedTable.extraSteps = updatedSteps;\r\n\r\n    const updatedLoadTables = state.loadTables.map((table, idx) =>\r\n      idx !== tableIdx ? table : updatedTable\r\n    );\r\n\r\n    return {\r\n      ...state,\r\n      loadTables: updatedLoadTables,\r\n      snapshotIsChanged: true,\r\n      snapshotIsSaved: false,\r\n    };\r\n  };\r\n\r\n  const setExtraStep = ({ tableIdx, columnIdx, value }) => {\r\n    const tables = [...state.loadTables];\r\n    tables[tableIdx].extraSteps[columnIdx] = +value;\r\n\r\n    return tables;\r\n  };\r\n\r\n  const setGuaranteeMode = ({ tableIdx, guaranteeMode }) => {\r\n    const tables = [...state.loadTables];\r\n    tables[tableIdx].guaranteeMode = guaranteeMode;\r\n\r\n    return tables;\r\n  };\r\n\r\n  switch (action.type) {\r\n    case \"SET_INITIAL_STATE\":\r\n      return {\r\n        ...state,\r\n        currentSaveIdx: 0,\r\n        customTools: [],\r\n        investorInfo: {\r\n          deposit: 1500000,\r\n          status: \"KSUR\",\r\n          skill: \"UNSKILLED\",\r\n        },\r\n        adrMode: \"day\",\r\n        iterationQty: 10,\r\n        stopValue: 0.5,\r\n        minYield: 0.5,\r\n        yieldStep: 0.02,\r\n        loadTables: [\r\n          {\r\n            selectedTools: [{ code: \"SBER\", toolType: \"shareRu\" }],\r\n            loadValue: 1,\r\n            steps: [0.5, 0.52, 0.54, 0.56, 0.58, 0.6, 0.62, 0.64],\r\n            extraSteps: [],\r\n            guaranteeMode: \"LONG\",\r\n          },\r\n        ],\r\n      };\r\n    case \"GET_TOOLS\":\r\n      return {\r\n        ...state,\r\n        tools: action.payload,\r\n      };\r\n    case \"GET_INVESTOR_INFO\":\r\n      return {\r\n        ...state,\r\n        investorInfo: action.payload,\r\n      };\r\n    case \"SET_CURRENT_SAVE_IDX\":\r\n      return {\r\n        ...state,\r\n        currentSaveIdx: action.payload,\r\n      };\r\n    case \"SET_CUSTOM_TOOLS\":\r\n      return {\r\n        ...state,\r\n        customTools: action.payload,\r\n        snapshotIsChanged: true,\r\n        snapshotIsSaved: false,\r\n      };\r\n    case \"GET_SAVES\":\r\n      let pure = params.get(\"pure\") === \"true\";\r\n\r\n      return {\r\n        ...state,\r\n        saves: action.payload,\r\n        currentSaveIdx: action.payload.length && !pure ? 1 : 0,\r\n      };\r\n    case \"GET_SAVE\":\r\n      let save = action.payload;\r\n\r\n      return {\r\n        ...state,\r\n        adrMode: save.adrMode,\r\n        iterationQty: save.iterationQty,\r\n        stopValue: save.stopValue,\r\n        minYield: save.minYield,\r\n        yieldStep: save.yieldStep,\r\n        loadTables: save.loadTables,\r\n        customTools: save.customTools,\r\n        investorInfo: {\r\n          ...state.investorInfo,\r\n          deposit: save.investorInfo.deposit,\r\n        },\r\n        snapshotIsSaved: true,\r\n        snapshotIsChanged: false,\r\n      };\r\n    case \"ADD_SAVE\":\r\n      return {\r\n        ...state,\r\n        saves: [action.payload, ...state.saves],\r\n        currentSaveIdx: 1,\r\n      };\r\n    case \"UPDATE_SAVE\":\r\n      console.log(action.payload);\r\n      let updatedSaves = [...state.saves].map((save) => {\r\n        if (save.id == action.payload.id) {\r\n          save.name = action.payload.name;\r\n          save.static = action.payload.static;\r\n        }\r\n        return save;\r\n      });\r\n      return {\r\n        ...state,\r\n        saves: updatedSaves,\r\n        snapshotIsSaved: true,\r\n        snapshotIsChanged: false,\r\n      };\r\n    case \"DELETE_SAVE\":\r\n      let filteredSaves = [...state.saves].filter(\r\n        (save) => save.id !== action.payload\r\n      );\r\n\r\n      return {\r\n        ...state,\r\n        saves: filteredSaves,\r\n        currentSaveIdx: filteredSaves.length ? 1 : 0,\r\n      };\r\n    case \"SET_IS_LOADING\":\r\n      return {\r\n        ...state,\r\n        loading: action.payload,\r\n      };\r\n    case \"ADD_TOOL\":\r\n      return addTool(action.payload);\r\n    case \"UPDATE_TOOL\":\r\n      return {\r\n        ...state,\r\n        loadTables: updateTool(action.payload),\r\n        snapshotIsChanged: true,\r\n        snapshotIsSaved: false,\r\n      };\r\n    case \"DELETE_TOOL\":\r\n      return deleteTool(action.payload);\r\n    case \"SET_LOAD_VALUE\":\r\n      return {\r\n        ...state,\r\n        loadTables: updateLoadValue(action.payload),\r\n        snapshotIsChanged: true,\r\n        snapshotIsSaved: false,\r\n      };\r\n    case \"SET_ITERATION_QTY\":\r\n      return {\r\n        ...state,\r\n        iterationQty: action.payload,\r\n        snapshotIsChanged: true,\r\n        snapshotIsSaved: false,\r\n      };\r\n    case \"SET_STOP_VALUE\":\r\n      return {\r\n        ...state,\r\n        stopValue: +action.payload,\r\n        snapshotIsChanged: true,\r\n        snapshotIsSaved: false,\r\n      };\r\n    case \"SET_MIN_YIELD\":\r\n      return {\r\n        ...state,\r\n        minYield: +action.payload,\r\n        snapshotIsChanged: true,\r\n        snapshotIsSaved: false,\r\n      };\r\n    case \"SET_YIELD_STEP\":\r\n      return {\r\n        ...state,\r\n        yieldStep: +action.payload,\r\n        snapshotIsChanged: true,\r\n        snapshotIsSaved: false,\r\n      };\r\n    case \"UPDATE_STEPS\":\r\n      return {\r\n        ...state,\r\n        loadTables: updateSteps(action.payload),\r\n      };\r\n    case \"SET_EXTRA_STEP\":\r\n      return {\r\n        ...state,\r\n        loadTables: setExtraStep(action.payload),\r\n        snapshotIsChanged: true,\r\n        snapshotIsSaved: false,\r\n      };\r\n    case \"SET_ADR_MODE\":\r\n      return {\r\n        ...state,\r\n        adrMode: action.payload,\r\n        snapshotIsChanged: true,\r\n        snapshotIsSaved: false,\r\n      };\r\n    case \"SET_GUARANTEE_MODE\":\r\n      return {\r\n        ...state,\r\n        loadTables: setGuaranteeMode(action.payload),\r\n        snapshotIsChanged: true,\r\n        snapshotIsSaved: false,\r\n      };\r\n    case \"ADD_STEP_COLUMN\":\r\n      return addStepColumn(action.payload);\r\n    case \"DELETE_EXTRA_STEP\":\r\n      return deleteExtraStep(action.payload);\r\n    case \"ADD_LOAD_TABLE\":\r\n      return {\r\n        ...state,\r\n        loadTables: [\r\n          ...state.loadTables,\r\n          JSON.parse(JSON.stringify(state.loadTables[0])),\r\n        ],\r\n        snapshotIsChanged: true,\r\n        snapshotIsSaved: false,\r\n      };\r\n    case \"DELETE_LOAD_TABLE\":\r\n      return {\r\n        ...state,\r\n        loadTables: state.loadTables.filter(\r\n          (table, idx) => idx !== action.payload\r\n        ),\r\n        snapshotIsChanged: true,\r\n        snapshotIsSaved: false,\r\n      };\r\n    case \"UPDATE_DEPOSIT\":\r\n      return {\r\n        ...state,\r\n        investorInfo: { ...state.investorInfo, deposit: action.payload },\r\n        snapshotIsChanged: true,\r\n        snapshotIsSaved: false,\r\n      };\r\n    case \"FUTURE_ERROR\":\r\n      return {\r\n        ...state,\r\n        error: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { merge, round, cloneDeep } from \"lodash\";\r\nimport fractionLength from \"./utils/fraction-length\"\r\nimport readyTools      from \"./adr.json\"\r\nimport readyToolsNew   from \"./adr-new.json\"\r\nimport readyToolsMarch from \"./adr-march.json\"\r\nimport readyToolsApril from \"./adr-april.json\"\r\n\r\nconst template = {\r\n  ref:             {},\r\n  fullName:        \"\",\r\n  shortName:       \"\",\r\n  code:            \"\",\r\n  stepPrice:       1,\r\n  priceStep:       1,\r\n  averageProgress: 1,\r\n  guarantee:       1,\r\n  currentPrice:    1,\r\n  volume:          1,\r\n  lotSize:         1,\r\n  dollarRate:      1,\r\n  adrDay:          1,\r\n  adrWeek:         1,\r\n  adrMonth:        1,\r\n  points: [\r\n    [70,  70],\r\n    [156, 55],\r\n    [267, 41],\r\n    [423, 27],\r\n    [692, 13],\r\n    [960,  7],\r\n  ],\r\n};\r\n\r\nclass Tool {\r\n\r\n  constructor(toCopy = {}) {\r\n    Object.keys(toCopy).forEach(key => {\r\n      this[key] = toCopy[key];\r\n    });\r\n  }\r\n\r\n  update(investorInfo) {\r\n    const { ref } = this;\r\n    if (ref && Object.keys(ref).length > 0) {\r\n      let guarantee = ref.guarantee || ref.guaranteeValue;\r\n\r\n      if (typeof guarantee == \"object\") {\r\n        let guaranteeExtracted = ref.guarantee[\"default\"];\r\n        const { status, type } = investorInfo;\r\n        if (status && type) {\r\n          if (ref.guarantee[status] && ref.guarantee[status][type]) {\r\n            guaranteeExtracted = ref.guarantee[status][type];\r\n          }\r\n        }\r\n\r\n        guarantee = parseNumber(guaranteeExtracted);\r\n      }\r\n      else {\r\n        guarantee = parseNumber(guarantee);\r\n      }\r\n\r\n      guarantee = round(guarantee, 2);\r\n\r\n      if (typeof guarantee == \"number\") {\r\n        this.guarantee = guarantee;\r\n      }\r\n      else {\r\n        throw new Error(\"ГО не число\");\r\n      }\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  set name(value) {\r\n    this.fullName = value;\r\n  }\r\n\r\n  get name() {\r\n    if (this.fullName) {\r\n      return this.fullName.replace(\"Фьючерсный контракт \", \"\");\r\n    }\r\n    else if (this.shortName) {\r\n      return this.shortName;\r\n    }\r\n    else return this.code;\r\n  }\r\n\r\n  get isFutures() {\r\n    return this.dollarRate == 0;\r\n  }\r\n  \r\n  getFullName() {\r\n    if (this.fullName) {\r\n      return this.fullName;\r\n    }\r\n    else if (this.shortName) {\r\n      return this.shortName;\r\n    }\r\n    else return this.code;\r\n  }\r\n\r\n  getSortProperty() {\r\n    if (this.shortName) {\r\n      return this.shortName;\r\n    }\r\n    else if (this.code) {\r\n      return this.code;\r\n    }\r\n    else {\r\n      return this.name;\r\n    }\r\n  }\r\n\r\n  toString(options = { long: true }) {\r\n    let str = String(this.code);\r\n    if (!this.shortName && this.fullName && options.long) {\r\n      return this.fullName + (str ? ` (${str})` : \"\");\r\n    }\r\n    else if (this.shortName) {\r\n      return this.shortName + (str ? `(${str})` : \"\");\r\n    }\r\n\r\n    return str;\r\n  }\r\n}\r\n\r\nconst fraction = number => {\r\n  const match = /\\.\\d+$/g.exec(String(number));\r\n  return match ? match[0].slice(1) : 0;\r\n};\r\n\r\nconst parseNumber = (value, fallback = 0) => {\r\n  let result = Number(value);\r\n  if (isNaN(result)) {\r\n    result = fallback;\r\n  }\r\n  return result;\r\n};\r\n\r\nconst parseTool = tool => {\r\n  let averageProgress = parseNumber(tool.averageProgress);\r\n  let currentPrice    = parseNumber(tool.price || tool.currentPrice);\r\n  let stepPrice       = parseNumber(tool.stepPrice);\r\n  let priceStep       = parseNumber(tool.priceStep);\r\n  let dollarRate      = parseNumber(tool.dollarRate);\r\n  let lotSize         = parseNumber(tool.lotVolume || tool.lotSize);\r\n  let volume          = parseNumber(tool.value);\r\n\r\n  let firstTradeDate  = parseNumber(tool.firstTradeDate);\r\n  let lastTradeDate   = parseNumber(tool.lastTradeDate);\r\n\r\n  let adrDay;\r\n  let adrWeek;\r\n  let adrMonth;\r\n\r\n  // Россия\r\n  if (dollarRate == 1) {\r\n    stepPrice = priceStep * lotSize;\r\n\r\n    // Оставляем такое же кол-во знаков после запятой, что и в priceStep\r\n    const match = String(priceStep).match(/\\.\\d+/);\r\n    if (match) {\r\n      stepPrice = round(stepPrice, match[0].length - 1)\r\n    }\r\n  }\r\n  // Фьючерсы\r\n  else if (dollarRate == 0) {}\r\n  // Америка\r\n  else {\r\n    priceStep = 0.01;\r\n    stepPrice = dollarRate * priceStep * lotSize;\r\n\r\n    // Оставляем такое же кол-во знаков после запятой, что и в priceStep\r\n    const match = String(priceStep).match(/\\.\\d+/);\r\n    if (match) {\r\n      stepPrice = round(stepPrice, match[0].length - 1)\r\n    }\r\n  }\r\n\r\n  var found = false;\r\n  \r\n  /**\r\n   *\r\n   *\r\n   * @param {*} readyTools\r\n   * @param {boolean} [strict=false] Если включен, то коды фьючерсов будут сравниваться не по первым двум символам, а на предмет полного соответствия\r\n   */\r\n  const check = (readyTools, strict = false) => {\r\n    for (let readyTool of readyTools) {\r\n      const lastCompareIndex = strict\r\n        ? undefined\r\n        : (readyTool.isFutures && dollarRate == 0) \r\n          ? 2 \r\n          : undefined;\r\n      const toolCode = tool.code.toLowerCase().slice(0, lastCompareIndex);\r\n      const readyToolCode = readyTool.code.replace(\".US\", \"\").toLowerCase().slice(0, lastCompareIndex);\r\n\r\n      if (toolCode == readyToolCode) {\r\n\r\n        if (readyTool.adr) {\r\n          adrDay   =  currentPrice * readyTool.adr      / 100;\r\n        }\r\n        if (readyTool.adrWeek) {\r\n          adrWeek  =  currentPrice * readyTool.adrWeek  / 100;\r\n        }\r\n        if (readyTool.adrMonth) {\r\n          adrMonth =  currentPrice * readyTool.adrMonth / 100;\r\n        }\r\n  \r\n        found = true;\r\n        break;\r\n      }\r\n    }\r\n  };\r\n\r\n  const filterFn = tool => {\r\n    if (tool.adrWeek == \"\" && tool.adrMonth == \"\") {\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  check(readyTools.filter(filterFn));\r\n  check(readyToolsNew.filter(filterFn));\r\n  check(readyToolsMarch.filter(filterFn), true);\r\n  check(readyToolsApril.filter(filterFn), true);\r\n\r\n  // Если инструмент не сметчился ни с одним из заготовленным файлов\r\n  if (!found) {\r\n    const blackSwan = currentPrice * 0.2;\r\n    adrDay = blackSwan / 10;\r\n\r\n    adrDay   = round(adrDay, 4);\r\n    adrWeek  = round(adrDay * 1.25, 4);\r\n    adrMonth = round(adrDay * 1.75, 4);\r\n  }\r\n\r\n  // Оставляем такое же кол-во знаков после запятой, что и в шаге цены\r\n  let fraction = fractionLength(priceStep);\r\n  if (adrDay) {\r\n    adrDay   = +(adrDay).toFixed(fraction);\r\n  }\r\n  if (adrWeek) {\r\n    adrWeek  = +(adrWeek).toFixed(fraction);\r\n  }\r\n  if (adrMonth) {\r\n    adrMonth = +(adrMonth).toFixed(fraction);\r\n  }\r\n\r\n  return {\r\n    ref:       tool,\r\n    code:      tool.code,\r\n    fullName:  tool.fullName  || tool.name,\r\n    shortName: tool.shortName,\r\n    stepPrice,\r\n    priceStep,\r\n    averageProgress,\r\n    currentPrice,\r\n    lotSize,\r\n    dollarRate,\r\n    volume,\r\n\r\n    firstTradeDate,\r\n    lastTradeDate,\r\n\r\n    adrDay,\r\n    adrWeek,\r\n    adrMonth,\r\n\r\n    matched: found\r\n  };\r\n};\r\n\r\nconst shouldBeSkipped = tool => {\r\n  // dollarRate == 0 or doesn't exist\r\n  if (!tool.dollarRate) {\r\n    if (tool.price == 0 || !tool.volume) {\r\n      return true;\r\n    }\r\n\r\n    // Истек срок действия\r\n    if (Number(tool.updateDate) > Number(tool.lastTradeDate)) {\r\n      return true\r\n    }\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nclass Tools {\r\n\r\n  /**\r\n   * @param {Array<{}>} tools\r\n   */\r\n  static parse(tools, options = {}) {\r\n    if (!tools || tools.length === 0) {\r\n      throw new Error(\"No tools found!\");\r\n    }\r\n\r\n    let investorInfo = options.investorInfo || {};\r\n    \r\n    let parsedTools = [];\r\n    let unmatchedTools = [];\r\n    for (const rowData of tools) {\r\n      if (shouldBeSkipped(rowData)) {\r\n        continue;\r\n      }\r\n\r\n      let tool = new Tool(merge(cloneDeep(template), parseTool(rowData, options)));\r\n      if (!tool.matched) {\r\n        unmatchedTools.push(tool);\r\n      }\r\n      tool = tool.update(investorInfo);\r\n      parsedTools.push(tool);\r\n    }\r\n\r\n    if (unmatchedTools.length) {\r\n      // console.warn(\"Не сметчились\", unmatchedTools.map(tool => tool + \"\"));\r\n    }\r\n\r\n    return parsedTools;\r\n  }\r\n\r\n  static sort(tools) {\r\n    let c = a => 10 > a ? -1000 + +a : a.charCodeAt(0);\r\n\r\n    // Alphabetical sort\r\n    let sorted = tools.sort((a, b) => {\r\n      const l = String(a.toString()).toLowerCase().replace(/[\\\"\\(\\)\\.]+/g, \"\").trim();\r\n      const r = String(b.toString()).toLowerCase().replace(/[\\\"\\(\\)\\.]+/g, \"\").trim();\r\n\r\n      let res = 0;\r\n      for (let i = 0; i < Math.min(l.length,r.length); i++) {\r\n        res = c(l[i]) - c(r[i]);\r\n        if (res != 0) {\r\n          break;\r\n        }\r\n      }\r\n      return res;\r\n    });\r\n\r\n    // Sorting the numbers at the end\r\n    sorted = sorted.sort((a, b) => {\r\n\r\n      const convert = str => {\r\n        let code;\r\n        let number;\r\n        let found = /-(\\d+)\\.(\\d+)/g.exec(str);\r\n        if (found) {\r\n          number = found[2] + \".\" + found[1];\r\n          code = str.slice(0, found.index);\r\n        }\r\n        else {\r\n          code = a;\r\n        }\r\n\r\n        return [code, number]\r\n      };\r\n\r\n      const [codeA, numberA] = convert(a.toString());\r\n      const [codeB, numberB] = convert(b.toString());\r\n      if (codeA == codeB) {\r\n        return (Math.trunc(numberA) - Math.trunc(numberB)) || (fraction(numberA) - fraction(numberB));\r\n      }\r\n    });\r\n\r\n    return sorted;\r\n  }\r\n\r\n  static create(\r\n    toolInfo = {\r\n      ref:             {},\r\n      fullName:        \"Сбербанк России ПАО ао\",\r\n      shortName:       \"\",\r\n      code:            \"SBER\",\r\n      stepPrice:       0.1,\r\n      priceStep:       0.01,\r\n      averageProgress: 0,\r\n      guarantee:       3109,\r\n      currentPrice:    310.9,\r\n      volume:          0,\r\n      lotSize:         10,\r\n      dollarRate:      1,\r\n      adrDay:          5.38,\r\n      adrWeek:         14.58,\r\n      adrMonth:        26.89,\r\n    },\r\n    options = {}\r\n  ) {\r\n    const investorInfo = options.investorInfo || {};\r\n\r\n    let tool = new Tool({ ...template, ...toolInfo });\r\n    tool = tool.update(investorInfo);\r\n    return tool;\r\n  }\r\n\r\n  static createArray() {\r\n    return [\r\n      this.create(),\r\n      this.create({\r\n        ref:             {},\r\n        fullName:        \"BR-3.21\",\r\n        shortName:       \"\",\r\n        code:            \"BRH1\",\r\n        stepPrice:       7.46955,\r\n        priceStep:       0.01,\r\n        averageProgress: 0,\r\n        guarantee:       7407.8,\r\n        currentPrice:    59.51,\r\n        volume:          0,\r\n        lotSize:         10,\r\n        dollarRate:      0,\r\n        adrDay:          1.65,\r\n        adrWeek:         3.71,\r\n        adrMonth:        8.27,\r\n      }),\r\n      this.create({\r\n        ref:             {},\r\n        fullName:        \"Si-3.21\",\r\n        shortName:       \"\",\r\n        code:            \"SiH1\",\r\n        stepPrice:       1,\r\n        priceStep:       1,\r\n        averageProgress: 0,\r\n        guarantee:       4783.9,\r\n        currentPrice:    73525,\r\n        volume:          0,\r\n        lotSize:         1000,\r\n        dollarRate:      0,\r\n        adrDay:          831,\r\n        adrWeek:         2198,\r\n        adrMonth:        5882,\r\n      }),\r\n      this.create({\r\n        ref:             {},\r\n        fullName:        \"3D Systems Corp.\",\r\n        shortName:       \"\",\r\n        code:            \"DDD\",\r\n        stepPrice:       .74,\r\n        priceStep:       .01,\r\n        averageProgress: 0,\r\n        guarantee:       3528.7,\r\n        currentPrice:    47.85,\r\n        volume:          0,\r\n        lotSize:         1,\r\n        dollarRate:      73.745,\r\n        adrDay:          3.03,\r\n        adrWeek:         5.11,\r\n        adrMonth:        16.51,\r\n      }),\r\n      this.create({\r\n        ref:             {},\r\n        fullName:        \"Abbvie Inc\",\r\n        shortName:       \"\",\r\n        code:            \"ABBV\",\r\n        stepPrice:       0.74,\r\n        priceStep:       0.01,\r\n        averageProgress: 0,\r\n        guarantee:       7974.4,\r\n        currentPrice:    107.85,\r\n        volume:          1,\r\n        lotSize:         1,\r\n        dollarRate:      73.94,\r\n        adrDay:          2.39,\r\n        adrWeek:         4.66,\r\n        adrMonth:        11.9,\r\n      }),\r\n      this.create({\r\n        ref:             {},\r\n        fullName:        \"Abiomed Inc.\",\r\n        shortName:       \"\",\r\n        code:            \"ABMD\",\r\n        stepPrice:       0.74,\r\n        priceStep:       0.01,\r\n        averageProgress: 0,\r\n        guarantee:       21812.9,\r\n        currentPrice:    296.11,\r\n        volume:          1,\r\n        lotSize:         1,\r\n        dollarRate:      73.665,\r\n        adrDay:          8.91,\r\n        adrWeek:         23.51,\r\n        adrMonth:        60.91,\r\n      }),\r\n      this.create({\r\n        ref:             {},\r\n        fullName:        \"Apple Inc\",\r\n        shortName:       \"\",\r\n        code:            \"AAPL\",\r\n        stepPrice:       0.73,\r\n        priceStep:       0.01,\r\n        averageProgress: 0,\r\n        guarantee:       8810.1,\r\n        currentPrice:    119.98,\r\n        volume:          1,\r\n        lotSize:         1,\r\n        dollarRate:      73.665,\r\n        adrDay:          3,\r\n        adrWeek:         8.45,\r\n        adrMonth:        12.18,\r\n      }),\r\n      this.create({\r\n        ref:             {},\r\n        fullName:        \"АЛРОСА ПАО ао\",\r\n        shortName:       \"\",\r\n        code:            \"ALRS\",\r\n        stepPrice:       0.1,\r\n        priceStep:       0.01,\r\n        averageProgress: 0,\r\n        guarantee:       1280,\r\n        currentPrice:    128,\r\n        volume:          1,\r\n        lotSize:         10,\r\n        dollarRate:      1,\r\n        adrDay:          2.75,\r\n        adrWeek:         5.47,\r\n        adrMonth:        10.59,\r\n      }),\r\n      this.create({\r\n        ref:             {},\r\n        fullName:        \"ПАО Московская Биржа\",\r\n        shortName:       \"\",\r\n        code:            \"MOEX\",\r\n        stepPrice:       0.1,\r\n        priceStep:       0.01,\r\n        averageProgress: 0,\r\n        guarantee:       1715.9,\r\n        currentPrice:    171.59,\r\n        volume:          1,\r\n        lotSize:         10,\r\n        dollarRate:      1,\r\n        adrDay:          3.11,\r\n        adrWeek:         7.67,\r\n        adrMonth:        17.64,\r\n      }),\r\n    ]\r\n  }\r\n\r\n  static getToolIndexByCode(tools = [], search = \"\") {\r\n    if (!search || !tools.length) {\r\n      return 0;\r\n    }\r\n    \r\n    let index = tools.indexOf( \r\n      tools.find( tool => \r\n        tool.getSortProperty() == search || \r\n        tool.code              == search\r\n      ) \r\n    );\r\n    if (index > -1) {\r\n      return index;\r\n    }\r\n\r\n    // Если в id есть месяц и год, то можно начать искать ближайший\r\n    const regexp = /\\d{1,2}\\.\\d{1,2}/;\r\n    const found = regexp.exec(search);\r\n    if ( found ) {\r\n      // Находим все инструменты с одинаковым кодом\r\n      let alike = [ ...tools ].filter(tool => \r\n        tool.getSortProperty().slice(0, found.index) == search.slice(0, found.index)\r\n      );\r\n\r\n      const sorted = this.sort( alike.map(t => t.getSortProperty()).concat(search) );\r\n      index = tools.indexOf( alike[0] ) + sorted.indexOf( sorted.find( n => n == search ) );\r\n    }\r\n\r\n    return Math.max(index, 0);\r\n  }\r\n}\r\n\r\nexport { Tools, Tool, template };","/**\r\n * @param {number} number\r\n */\r\nexport default function fractionLength(number) {\r\n  const match = /\\.\\d+$/g.exec(String(number));\r\n  return match ? match[0].slice(1).length : 0;\r\n}","import React, { createContext, useReducer } from \"react\";\r\nimport axios from \"axios\";\r\nimport qs from \"qs\";\r\n\r\nimport AppReducer from \"./AppReducer\";\r\n\r\nimport { Tools } from \"../common/tools\";\r\n\r\nconst initialState = {\r\n  saves: [],\r\n  currentSaveIdx: 0,\r\n  tools: [],\r\n  customTools: [],\r\n  investorInfo: {\r\n    deposit: 1500000,\r\n    email: \"user@mail.ru\",\r\n    status: \"KSUR\",\r\n    skill: \"UNSKILLED\",\r\n  },\r\n  adrMode: \"day\",\r\n  iterationQty: 10,\r\n  stopValue: 0.5,\r\n  minYield: 0.5,\r\n  yieldStep: 0.02,\r\n  loadTables: [\r\n    {\r\n      selectedTools: [{ code: \"SBER\", toolType: \"shareRu\" }],\r\n      loadValue: 1,\r\n      steps: [...Array(8)],\r\n      extraSteps: [],\r\n      guaranteeMode: \"LONG\",\r\n    },\r\n  ],\r\n  error: null,\r\n  loading: false,\r\n  snapshotIsSaved: true,\r\n  snapshotIsChanged: false,\r\n};\r\n\r\nexport const GlobalContext = createContext(initialState);\r\n\r\nexport const GlobalProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(AppReducer, initialState);\r\n\r\n  // Actions\r\n  async function setInitialState() {\r\n    try {\r\n      dispatch({\r\n        type: \"SET_INITIAL_STATE\",\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response.data.error,\r\n      });\r\n    }\r\n  }\r\n  async function getTools() {\r\n    try {\r\n      const futuresRequest = axios.get(\r\n        \"https://fani144.ru/local/php_interface/s1/ajax/?method=getFutures\"\r\n      );\r\n      const sharesRequest = axios.get(\r\n        \"https://fani144.ru/local/php_interface/s1/ajax/?method=getTrademeterInfo\"\r\n      );\r\n\r\n      const tools = await Promise.all([futuresRequest, sharesRequest]).then(\r\n        (responses) => {\r\n          let tools = [...responses[0].data.data, ...responses[1].data.data];\r\n\r\n          tools = Tools.parse(tools, {\r\n            investorInfo: state.investorInfo,\r\n          });\r\n\r\n          tools = Tools.sort(tools);\r\n\r\n          return tools;\r\n        }\r\n      );\r\n      console.log(\"tools:\", tools);\r\n      dispatch({\r\n        type: \"GET_TOOLS\",\r\n        payload: tools,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response.data.error,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function getInvestorInfo() {\r\n    try {\r\n      const res = await axios.get(\r\n        \"https://fani144.ru/local/php_interface/s1/ajax/?method=getInvestorInfo\"\r\n      );\r\n      if (res.data.data)\r\n        dispatch({\r\n          type: \"GET_INVESTOR_INFO\",\r\n          payload: res.data.data,\r\n        });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function getSaves() {\r\n    try {\r\n      const res = await axios.get(\r\n        \"https://fani144.ru/local/php_interface/s1/ajax/?method=getIntradaySnapshots\"\r\n      );\r\n      if (!res.data.error) {\r\n        let sortedSaves = res.data.data.sort(\r\n          (a, b) => b.dateUpdate - a.dateUpdate\r\n        );\r\n        console.log(\"Sorted saves:\", sortedSaves);\r\n        dispatch({\r\n          type: \"GET_SAVES\",\r\n          payload: sortedSaves,\r\n        });\r\n      }\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function getSave(id) {\r\n    try {\r\n      const res = await axios.get(\r\n        `https://fani144.ru/local/php_interface/s1/ajax/?method=getIntradaySnapshot&id=${id}`\r\n      );\r\n      if (!res.data.error) {\r\n        let expectedKeys = [\r\n          \"adrMode\",\r\n          \"iterationQty\",\r\n          \"stopValue\",\r\n          \"minYield\",\r\n          \"yieldStep\",\r\n          \"loadTables\",\r\n          \"customTools\",\r\n          \"investorInfo\",\r\n        ];\r\n        let save = JSON.parse(res.data.data.static);\r\n        let keys = Object.keys(save);\r\n        let isMatch = true;\r\n\r\n        keys.map((key) => {\r\n          if (!expectedKeys.includes(key)) isMatch = false;\r\n        });\r\n\r\n        if (isMatch) {\r\n          dispatch({\r\n            type: \"GET_SAVE\",\r\n            payload: save,\r\n          });\r\n        } else {\r\n          deleteSave(res.data.data.id);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function addSave(data) {\r\n    try {\r\n      const res = await axios.post(\r\n        \"/local/php_interface/s1/ajax/?method=addIntradaySnapshot\",\r\n        qs.stringify(data)\r\n      );\r\n      console.log(\"addIntradaySnapshot response:\", res.data);\r\n      if (!res.data.error) {\r\n        data.id = res.data.id;\r\n        dispatch({\r\n          type: \"ADD_SAVE\",\r\n          payload: data,\r\n        });\r\n      }\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function updateSave(data) {\r\n    try {\r\n      const res = await axios.post(\r\n        \"/local/php_interface/s1/ajax/?method=updateIntradaySnapshot\",\r\n        qs.stringify(data)\r\n      );\r\n\r\n      console.log(\"updateIntradaySnapshot response:\", res.data);\r\n      if (!res.data.error) {\r\n        dispatch({\r\n          type: \"UPDATE_SAVE\",\r\n          payload: data,\r\n        });\r\n      } else {\r\n        console.log(res.data);\r\n      }\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function deleteSave(id) {\r\n    try {\r\n      const res = await axios.post(\r\n        \"/local/php_interface/s1/ajax/?method=deleteIntradaySnapshot\",\r\n        qs.stringify({ id })\r\n      );\r\n\r\n      if (!res.data.error) {\r\n        console.log(\"Deleted snapshot:\", id);\r\n\r\n        dispatch({\r\n          type: \"DELETE_SAVE\",\r\n          payload: id,\r\n        });\r\n      } else {\r\n        console.log(res.data.message);\r\n      }\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function setCurrentSaveIdx(idx) {\r\n    try {\r\n      dispatch({\r\n        type: \"SET_CURRENT_SAVE_IDX\",\r\n        payload: idx,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response.data.error,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function setCustomTools(tools) {\r\n    try {\r\n      dispatch({\r\n        type: \"SET_CUSTOM_TOOLS\",\r\n        payload: tools,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response.data.error,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function addTool(tableIdx) {\r\n    try {\r\n      dispatch({\r\n        type: \"ADD_TOOL\",\r\n        payload: { tableIdx },\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response.data.error,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function deleteTool(tableIdx, rowIdx) {\r\n    try {\r\n      dispatch({\r\n        type: \"DELETE_TOOL\",\r\n        payload: { tableIdx, rowIdx },\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response.data.error,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function updateTool(tableIdx, rowIdx, code, toolType) {\r\n    try {\r\n      dispatch({\r\n        type: \"UPDATE_TOOL\",\r\n        payload: { tableIdx, rowIdx, code, toolType },\r\n      });\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  async function setLoadValue(tableIdx, value) {\r\n    try {\r\n      dispatch({\r\n        type: \"SET_LOAD_VALUE\",\r\n        payload: { tableIdx, value },\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response.data.error,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function setIterationQty(value) {\r\n    try {\r\n      dispatch({\r\n        type: \"SET_ITERATION_QTY\",\r\n        payload: value,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response.data.error,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function setStopValue(value) {\r\n    try {\r\n      dispatch({\r\n        type: \"SET_STOP_VALUE\",\r\n        payload: value,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response.data.error,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function setMinYield(value) {\r\n    try {\r\n      dispatch({\r\n        type: \"SET_MIN_YIELD\",\r\n        payload: value,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response.data.error,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function setYieldStep(value) {\r\n    try {\r\n      dispatch({\r\n        type: \"SET_YIELD_STEP\",\r\n        payload: value,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response.data.error,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function updateSteps(tableIdx, steps) {\r\n    try {\r\n      dispatch({\r\n        type: \"UPDATE_STEPS\",\r\n        payload: { tableIdx, steps },\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response.data.error,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function setAdrMode(value) {\r\n    try {\r\n      dispatch({\r\n        type: \"SET_ADR_MODE\",\r\n        payload: value,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response.data.error,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function setGuaranteeMode(tableIdx, guaranteeMode) {\r\n    try {\r\n      dispatch({\r\n        type: \"SET_GUARANTEE_MODE\",\r\n        payload: { tableIdx, guaranteeMode },\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function addStepColumn(tableIdx) {\r\n    try {\r\n      dispatch({\r\n        type: \"ADD_STEP_COLUMN\",\r\n        payload: { tableIdx },\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response.data.error,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function setExtraStep(tableIdx, columnIdx, value) {\r\n    try {\r\n      dispatch({\r\n        type: \"SET_EXTRA_STEP\",\r\n        payload: { tableIdx, columnIdx, value },\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response.data.error,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function deleteExtraStep(tableIdx, columnIdx) {\r\n    try {\r\n      dispatch({\r\n        type: \"DELETE_EXTRA_STEP\",\r\n        payload: { tableIdx, columnIdx },\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response.data.error,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function addLoadTable() {\r\n    try {\r\n      dispatch({\r\n        type: \"ADD_LOAD_TABLE\",\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response.data.error,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function deleteLoadTable(tableIdx) {\r\n    try {\r\n      dispatch({\r\n        type: \"DELETE_LOAD_TABLE\",\r\n        payload: tableIdx,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response.data.error,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function updateDeposit(depoValue) {\r\n    try {\r\n      dispatch({\r\n        type: \"UPDATE_DEPOSIT\",\r\n        payload: depoValue,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response.data.error,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function setIsLoading(bool) {\r\n    try {\r\n      dispatch({\r\n        type: \"SET_IS_LOADING\",\r\n        payload: bool,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FUTURE_ERROR\",\r\n        payload: err.response.data.error,\r\n      });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <GlobalContext.Provider\r\n      value={{\r\n        tools: state.tools,\r\n        investorInfo: state.investorInfo,\r\n        loadTables: state.loadTables,\r\n        iterationQty: state.iterationQty,\r\n        stopValue: state.stopValue,\r\n        minYield: state.minYield,\r\n        yieldStep: state.yieldStep,\r\n        adrMode: state.adrMode,\r\n        error: state.error,\r\n        loading: state.loading,\r\n        saves: state.saves,\r\n        snapshotIsChanged: state.snapshotIsChanged,\r\n        snapshotIsSaved: state.snapshotIsSaved,\r\n        currentSaveIdx: state.currentSaveIdx,\r\n        customTools: state.customTools,\r\n\r\n        setInitialState,\r\n        setIsLoading,\r\n        setCurrentSaveIdx,\r\n        setCustomTools,\r\n        getTools,\r\n        getInvestorInfo,\r\n        getSaves,\r\n        getSave,\r\n        addSave,\r\n        updateSave,\r\n        deleteSave,\r\n        addTool,\r\n        updateTool,\r\n        deleteTool,\r\n        updateSteps,\r\n        setLoadValue,\r\n        setIterationQty,\r\n        setStopValue,\r\n        setMinYield,\r\n        setYieldStep,\r\n        setAdrMode,\r\n        setGuaranteeMode,\r\n        setExtraStep,\r\n        addStepColumn,\r\n        deleteExtraStep,\r\n        addLoadTable,\r\n        deleteLoadTable,\r\n        updateDeposit,\r\n      }}\r\n    >\r\n      {children}\r\n    </GlobalContext.Provider>\r\n  );\r\n};\r\n","export default function isEqual(obj1, obj2) {\r\n  //Loop through properties in object 1\r\n  for (var p in obj1) {\r\n    //Check property exists on both objects\r\n    if (obj1.hasOwnProperty(p) !== obj2.hasOwnProperty(p)) return false;\r\n\r\n    if (obj1[p] === null && obj2[p] !== null) return false;\r\n    if (obj2[p] === null && obj1[p] !== null) return false;\r\n\r\n    switch (typeof (obj1[p])) {\r\n      //Deep compare objects\r\n      case 'object':\r\n        if (!isEqual(obj1[p], obj2[p])) return false;\r\n        break;\r\n      //Compare function code\r\n      case 'function':\r\n        break;\r\n      //Compare values\r\n      default:\r\n        if (obj1[p] === '' && obj2[p] !== '') return false;\r\n        if (obj2[p] === '' && obj1[p] !== '') return false;\r\n        if (obj1[p] != obj2[p]) return false;\r\n    }\r\n  }\r\n\r\n  //Check object 2 for any extra properties\r\n  for (var p in obj2) {\r\n    if (typeof (obj1[p]) == 'undefined') return false;\r\n  }\r\n  return true;\r\n}","export default function croppString(str = \"\", len = 0, end = \"...\") {\r\n  return str.substr(0, len) + (len < str.length ? end : \"\");\r\n}","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\n\r\nimport './style.scss'\r\n\r\nexport default function Stack(props) {\r\n  return (\r\n    <div {...props} className={['stack'].concat(props.className).join(' ')}>\r\n      {props.children}\r\n    </div>\r\n  )\r\n}","import React from \"react\";\r\nimport { Tooltip } from \"antd/es\";\r\n\r\nimport \"./style.scss\";\r\n\r\nexport default function CrossButton(props) {\r\n  const label = props.label;\r\n  const onClick = props.onClick || (() => {});\r\n\r\n  return (\r\n    <Tooltip title={label}>\r\n      <button\r\n        {...props}\r\n        className={[\"cross-button\"].concat(props.className).join(\" \")}\r\n        aria-label={label}\r\n        onClick={(e) => onClick(e)}\r\n      >\r\n        <span role=\"img\" aria-label=\"plus\" className=\"anticon anticon-plus\">\r\n          <svg\r\n            viewBox=\"64 64 896 896\"\r\n            focusable=\"false\"\r\n            data-icon=\"plus\"\r\n            width=\"1em\"\r\n            height=\"1em\"\r\n            fill=\"currentColor\"\r\n            aria-hidden=\"true\"\r\n          >\r\n            <defs>\r\n              <style></style>\r\n            </defs>\r\n            <path d=\"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z\"></path>\r\n            <path d=\"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z\"></path>\r\n          </svg>\r\n        </span>\r\n      </button>\r\n    </Tooltip>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Input, Tooltip } from \"antd/es\";\r\nimport \"./style.scss\";\r\n\r\nlet isIPhone = /iPhone/i.test(navigator.userAgent);\r\n\r\nexport default class NumericInput extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.onInvalid =\r\n      this.props.onInvalid ||\r\n      function () {\r\n        return \"\";\r\n      };\r\n    this.className = this.props.className || \"\";\r\n\r\n    this.state = {\r\n      value: this.format(\r\n        this.props.defaultValue === \"\" ? \"\" : this.props.defaultValue\r\n      ),\r\n      errMsg: \"\",\r\n      positive: this.props.defaultValue >= 0,\r\n    };\r\n\r\n    if (this.props.onRef) {\r\n      this.props.onRef(this);\r\n    }\r\n  }\r\n\r\n  get format() {\r\n    return this.props.format || ((val) => val);\r\n  }\r\n\r\n  get round() {\r\n    return this.props.round == \"true\";\r\n  }\r\n\r\n  get unsigned() {\r\n    return this.props.unsigned == \"true\";\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { defaultValue, test } = this.props;\r\n    const { value } = this.state;\r\n\r\n    if ((isNaN(defaultValue) || defaultValue == null) && value != \"0\") {\r\n      console.warn(\"defaultValue equals NaN!\");\r\n      this.setState({ value: 0 });\r\n      return;\r\n    } else if (defaultValue != prevProps.defaultValue) {\r\n      this.setState({ value: this.format(defaultValue) });\r\n    }\r\n  }\r\n\r\n  setErrorMsg(errMsg) {\r\n    this.setState({ errMsg });\r\n  }\r\n\r\n  onChange(e) {\r\n    var { value } = e.target;\r\n    var { onChange } = this.props;\r\n\r\n    if (value == \".\") {\r\n      value = \"0.\";\r\n    } else if (value == \",\") {\r\n      value = \"0,\";\r\n    }\r\n\r\n    // regexp start\r\n    var regexpCode = \"^\";\r\n    if (!this.unsigned) {\r\n      regexpCode += \"-?\";\r\n    }\r\n\r\n    regexpCode = regexpCode + \"[0-9]*\";\r\n\r\n    if (!this.round) {\r\n      regexpCode = regexpCode + `((\\\\.|\\\\,)[0-9]*)?`;\r\n    }\r\n\r\n    regexpCode = regexpCode + \"$\";\r\n    var regexp = new RegExp(regexpCode);\r\n    // regexp end\r\n\r\n    if (regexp.test(value)) {\r\n      this.setState({ value });\r\n      if (onChange) {\r\n        // TODO: отправлять вторым аргументом this.parse(value)\r\n        onChange(e, String(value).replace(/\\,/g, \".\"), this);\r\n      }\r\n    }\r\n  }\r\n\r\n  onFocus(e) {\r\n    var { value } = e.target;\r\n    value = (value + \"\").replace(/\\s+/g, \"\");\r\n    this.setState({ value: value });\r\n    if (this.props.onFocus) {\r\n      this.props.onFocus(e);\r\n    }\r\n  }\r\n\r\n  parse(val, test) {\r\n    let { min, max } = this.props;\r\n\r\n    let value = val\r\n      .replace(/\\s+/g, \"\")\r\n      .replace(/\\,/g, \".\")\r\n      .replace(/^0+/g, \"0\");\r\n\r\n    if (value == \"-\") {\r\n      value = 0;\r\n    }\r\n\r\n    if (\r\n      !this.round &&\r\n      value.indexOf(\".\") < 0 &&\r\n      value.length > 1 &&\r\n      value[0] == \"0\"\r\n    ) {\r\n      var before = value.substring(0, 1);\r\n      var after = value.substring(1, value.length);\r\n      value = before + \".\" + after;\r\n    }\r\n\r\n    value = Number(value) + \"\";\r\n\r\n    if (min) {\r\n      value = Math.max(+value, +min);\r\n    }\r\n    if (max) {\r\n      value = Math.min(+value, +max);\r\n    }\r\n\r\n    if (value == 0) {\r\n      value = \"0\";\r\n    }\r\n\r\n    value += \"\";\r\n\r\n    var lastChar = value.charAt(value.length - 1);\r\n    if (lastChar == \".\" || lastChar == \",\") {\r\n      value = value.slice(0, -1);\r\n    }\r\n\r\n    return value;\r\n  }\r\n\r\n  onBlur(e) {\r\n    var { value } = this.state;\r\n    var { placeholder } = this.props;\r\n\r\n    if (placeholder && value === \"\") {\r\n      // return;\r\n    }\r\n\r\n    let val = value;\r\n    if (val) {\r\n      val = this.parse(value);\r\n      if (isNaN(val)) {\r\n        val = 0;\r\n      }\r\n\r\n      val = Number(val);\r\n    }\r\n\r\n    this.setState({ value: this.format(val) });\r\n    if (this.props.onBlur) {\r\n      this.props.onBlur(val, value, this);\r\n    }\r\n  }\r\n\r\n  onKeyDown(e) {\r\n    if (\r\n      [\r\n        13, // Enter\r\n        27, // Escape\r\n      ].indexOf(e.keyCode) > -1\r\n    ) {\r\n      e.target.blur();\r\n      e.stopPropagation();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { positive, value, errMsg } = this.state;\r\n    const { unsigned } = this.props;\r\n\r\n    const safeProps = { ...this.props };\r\n    delete safeProps.format;\r\n\r\n    return (\r\n      <Tooltip title={errMsg} visible={errMsg.length > 0}>\r\n        <div\r\n          className={[]\r\n            .concat(this.className)\r\n            .concat(\"numeric-input-wrap\")\r\n            .join(\" \")\r\n            .trim()}\r\n        >\r\n          <Input\r\n            type=\"text\"\r\n            inputMode={\"decimal\"}\r\n            placeholder={0}\r\n            maxLength={25}\r\n            {...safeProps}\r\n            className={[]\r\n              .concat(\"numeric-input\")\r\n              .concat(errMsg.length ? \" error\" : \"\")\r\n              .concat(isIPhone ? \"iPhone\" : \"\")\r\n              .join(\" \")\r\n              .trim()}\r\n            onKeyDown={(e) => this.onKeyDown(e)}\r\n            onChange={(e) => this.onChange(e)}\r\n            onFocus={(e) => this.onFocus(e)}\r\n            onBlur={(e) => this.onBlur(e)}\r\n            value={value}\r\n          />\r\n\r\n          {!unsigned && isIPhone && (\r\n            <button\r\n              // className={\"iPhone-button\"}\r\n              onClick={(e) => {\r\n                const parsedValue = +String(value).replace(/\\s+/g, \"\");\r\n                if (parsedValue !== 0) {\r\n                  this.setState({\r\n                    value: this.format(-parsedValue),\r\n                    positive: !positive,\r\n                  });\r\n\r\n                  if (this.props.onBlur) {\r\n                    this.props.onBlur(-parsedValue, this.format(-parsedValue));\r\n                  }\r\n                }\r\n              }}\r\n            >\r\n              <svg\r\n                className={positive ? \"\" : \"negative\"}\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 447.243 447.243\"\r\n              >\r\n                <path d=\"M420.361 192.229a31.967 31.967 0 00-5.535-.41H99.305l6.88-3.2a63.998 63.998 0 0018.08-12.8l88.48-88.48c11.653-11.124 13.611-29.019 4.64-42.4-10.441-14.259-30.464-17.355-44.724-6.914a32.018 32.018 0 00-3.276 2.754l-160 160c-12.504 12.49-12.515 32.751-.025 45.255l.025.025 160 160c12.514 12.479 32.775 12.451 45.255-.063a32.084 32.084 0 002.745-3.137c8.971-13.381 7.013-31.276-4.64-42.4l-88.32-88.64a64.002 64.002 0 00-16-11.68l-9.6-4.32h314.24c16.347.607 30.689-10.812 33.76-26.88 2.829-17.445-9.019-33.88-26.464-36.71z\" />\r\n              </svg>\r\n            </button>\r\n          )}\r\n        </div>\r\n      </Tooltip>\r\n    );\r\n  }\r\n}\r\n","import React, { memo } from \"react\";\r\nimport { Button } from \"antd/es\";\r\n\r\nimport CrossButton from \"../cross-button\";\r\n\r\nimport Stack from \"../stack\";\r\nimport \"./style.scss\";\r\n\r\nvar dialogAPI = {};\r\n\r\ndialogAPI.getFocusableDescendants = (element) => {\r\n  return element.querySelectorAll(\r\n    'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n  );\r\n};\r\n\r\ndialogAPI.focusFirstDescendant = (element) => {\r\n  let elementToFocus;\r\n  const focusFirstElement = element.querySelector(\".js-dialog-focus-first\");\r\n  if (focusFirstElement) {\r\n    elementToFocus = focusFirstElement;\r\n  } else {\r\n    const focusable = dialogAPI.getFocusableDescendants(element);\r\n    elementToFocus = focusable[0];\r\n  }\r\n\r\n  elementToFocus.focus();\r\n};\r\n\r\ndialogAPI.focusLastDescendant = (element) => {\r\n  const focusable = dialogAPI.getFocusableDescendants(element);\r\n  focusable[focusable.length - 1].focus();\r\n};\r\n\r\ndialogAPI.getCurrentDialog = () => {\r\n  const dialogs = document.querySelectorAll(\".dialog:not([hidden])\");\r\n  return dialogs[dialogs.length - 1];\r\n};\r\n\r\ndialogAPI.trapFocus = (event) => {\r\n  event.stopPropagation();\r\n\r\n  const dialogHTML = dialogAPI.getCurrentDialog();\r\n  const dialogContentHTML = dialogHTML.querySelector(\".dialog__inner\");\r\n  const focusable = dialogAPI.getFocusableDescendants(dialogContentHTML);\r\n\r\n  if (dialogContentHTML.contains(event.target)) {\r\n    dialogHTML.lastFocus = event.target;\r\n  } else {\r\n    if (dialogHTML.lastFocus == focusable[0]) {\r\n      dialogAPI.focusLastDescendant(dialogContentHTML);\r\n    } else {\r\n      dialogAPI.focusFirstDescendant(dialogContentHTML);\r\n    }\r\n    dialogHTML.lastFocus = document.activeElement;\r\n  }\r\n};\r\n\r\ndialogAPI.handleEscape = (event) => {\r\n  // const key = event.which || event.keyCode;\r\n  // if (key === 27) {\r\n  //   dialogAPI.closeLast();\r\n  //   event.stopPropagation();\r\n  // }\r\n};\r\n\r\ndialogAPI.handleClick = (event) => {\r\n  if (event.target == dialogAPI.getCurrentDialog()) {\r\n    dialogAPI.closeLast();\r\n  }\r\n};\r\n\r\ndialogAPI.open = (dialogID, initiator) => {\r\n  const dialogHTML = document.getElementById(dialogID);\r\n  if (!dialogHTML) {\r\n    return;\r\n  }\r\n  // Remember initiator\r\n  dialogHTML.initiator = initiator ? initiator : document.activeElement;\r\n  // Show dialog\r\n  dialogHTML.removeAttribute(\"hidden\");\r\n  // Focus first descendent\r\n  dialogAPI.focusFirstDescendant(dialogHTML.querySelector(\".dialog__inner\"));\r\n  // Set lastFocus as the first focusable descendent\r\n  dialogHTML.lastFocus = dialogAPI.getFocusableDescendants(\r\n    dialogHTML.querySelector(\".dialog__inner\")\r\n  )[0];\r\n  // Disable scrolling\r\n  document.body.classList.add(\"scroll-disabled\");\r\n  // Trap focus\r\n  document.addEventListener(\"focus\", dialogAPI.trapFocus, true);\r\n  // Close dialog on Escape\r\n  document.addEventListener(\"keyup\", dialogAPI.handleEscape);\r\n  // Close on click outside the dialog\r\n  // document.addEventListener(\"click\", dialogAPI.handleClick);\r\n};\r\n\r\ndialogAPI.closeLast = () => {\r\n  const dialogHTML = dialogAPI.getCurrentDialog();\r\n  if (!dialogHTML) {\r\n    return;\r\n  }\r\n  // Hide dialog\r\n  dialogHTML.setAttribute(\"hidden\", \"\");\r\n  // Enable scrolling\r\n  document.body.classList.remove(\"scroll-disabled\");\r\n  // Release focus\r\n  document.removeEventListener(\"focus\", dialogAPI.trapFocus, true);\r\n  // Return focus to initiator\r\n  if (dialogHTML.initiator) {\r\n    dialogHTML.initiator.focus();\r\n  }\r\n};\r\n\r\ndialogAPI.close = (dialogID) => {\r\n  const dialogHTML = document.getElementById(dialogID);\r\n  if (!dialogHTML) {\r\n    return;\r\n  }\r\n  // Hide dialog\r\n  dialogHTML.setAttribute(\"hidden\", \"\");\r\n  // Enable scrolling\r\n  document.body.classList.remove(\"scroll-disabled\");\r\n  // Release focus\r\n  document.removeEventListener(\"focus\", dialogAPI.trapFocus, true);\r\n  // Return focus to initiator\r\n  if (dialogHTML.initiator) {\r\n    dialogHTML.initiator.focus();\r\n  }\r\n};\r\n\r\n// TODO: accessible close button that is visible only when focused\r\nconst Dialog = memo(\r\n  class extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n\r\n      const { onRef } = this.props;\r\n      if (onRef) {\r\n        onRef(this);\r\n      }\r\n    }\r\n\r\n    componentDidMount() {\r\n      window.addEventListener(\"keyup\", (event) => {\r\n        const key = event.which || event.keyCode;\r\n\r\n        if (key === 27) {\r\n          this.onClose();\r\n          event.stopPropagation();\r\n        }\r\n      });\r\n    }\r\n\r\n    onConfirm() {\r\n      const { onConfirm } = this.props;\r\n      if (onConfirm) {\r\n        if (onConfirm()) {\r\n          dialogAPI.closeLast();\r\n        }\r\n      }\r\n    }\r\n\r\n    onCancel() {\r\n      const { onCancel, onClose } = this.props;\r\n      var callback = onCancel || onClose;\r\n      if (callback) {\r\n        if (callback()) {\r\n          dialogAPI.closeLast();\r\n        }\r\n      } else {\r\n        dialogAPI.closeLast();\r\n      }\r\n    }\r\n\r\n    onClose() {\r\n      const { onClose } = this.props;\r\n      if (onClose) {\r\n        if (onClose()) {\r\n          dialogAPI.closeLast();\r\n        }\r\n      } else {\r\n        dialogAPI.closeLast();\r\n      }\r\n    }\r\n\r\n    render() {\r\n      let {\r\n        id,\r\n        className,\r\n        title,\r\n\r\n        contentClassName,\r\n\r\n        footer,\r\n        hideFooter,\r\n\r\n        confirmText,\r\n        confirmClass,\r\n        hideConfirm,\r\n\r\n        cancelText,\r\n        cancelClass,\r\n        hideCancel,\r\n\r\n        pure,\r\n      } = this.props;\r\n\r\n      // console.log('rendering Dialog', id);\r\n\r\n      className = className || \"\";\r\n      const block = \"dialog\";\r\n\r\n      contentClassName = contentClassName || \"\";\r\n\r\n      return (\r\n        <div\r\n          id={id}\r\n          className={[]\r\n            .concat(block)\r\n            .concat(className)\r\n            .concat(pure ? \"pure\" : \"\")\r\n            .join(\" \")\r\n            .trim()}\r\n          role=\"dialog\"\r\n          aria-modal=\"true\"\r\n          aria-label={title}\r\n          hidden={true}\r\n          onClick={(e) => {\r\n            if (e.target.id.split(\" \").indexOf(id) > -1) {\r\n              this.onClose();\r\n            }\r\n          }}\r\n        >\r\n          <div tabIndex=\"0\" aria-hidden=\"true\"></div>\r\n          <div className={`${block}__inner card`}>\r\n            <Stack className={className}>\r\n              {!pure ? <h2 className={`${block}__title`}>{title}</h2> : null}\r\n\r\n              <div className={`${block}__content`}>{this.props.children}</div>\r\n\r\n              {!pure &&\r\n                (footer\r\n                  ? footer\r\n                  : !hideFooter && (\r\n                      <div className={`${block}-footer-wrap`}>\r\n                        <footer className={`${block}-footer`}>\r\n                          {!hideCancel && (\r\n                            <Button\r\n                              className={[]\r\n                                .concat(\"custom-btn\")\r\n                                .concat(cancelClass)\r\n                                .join(\" \")\r\n                                .trim()}\r\n                              onClick={() => this.onCancel()}\r\n                            >\r\n                              {cancelText ? cancelText : \"Отмена\"}\r\n                            </Button>\r\n                          )}\r\n\r\n                          {!hideConfirm && (\r\n                            <Button\r\n                              className=\"custom-btn custom-btn--filled\"\r\n                              type=\"primary\"\r\n                              onClick={() => this.onConfirm()}\r\n                            >\r\n                              {confirmText ? confirmText : \"Сохранить\"}\r\n                            </Button>\r\n                          )}\r\n                        </footer>\r\n                      </div>\r\n                    ))}\r\n            </Stack>\r\n            {!pure ? (\r\n              <CrossButton\r\n                className={`${block}__close`}\r\n                onClick={(e) => this.onClose()}\r\n              />\r\n            ) : null}\r\n          </div>\r\n          <div tabIndex=\"0\" aria-hidden=\"true\"></div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n);\r\n\r\nexport { Dialog, dialogAPI };\r\n","import React, { memo } from \"react\";\r\nimport { Input } from \"antd/es\";\r\n\r\nimport isEqual from \"../../utils/is-equal\";\r\n\r\nimport croppString from \"../../utils/cropp-string\";\r\n\r\nimport Stack from \"../stack\";\r\nimport CrossButton from \"../cross-button\";\r\nimport NumericInput from \"../numeric-input\";\r\nimport { Dialog, dialogAPI } from \"../dialog\";\r\n\r\nimport \"./style.scss\";\r\n\r\nclass Config extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const { customTools } = this.props;\r\n\r\n    this.ref = React.createRef();\r\n\r\n    this.state = {\r\n      showMax: 30,\r\n      customTools,\r\n      changed: false,\r\n      alertText: \"\",\r\n      filter: \"\",\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.getElementById(this.ref.current.id);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (!isEqual(prevProps.customTools, this.props.customTools)) {\r\n      this.setState({ customTools: this.props.customTools });\r\n    }\r\n\r\n    if (!isEqual(prevProps.tools, this.props.tools)) {\r\n      this.setState({ tools: this.props.tools });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { alertText, changed, customTools, filter, showMax } = this.state;\r\n    let {\r\n      id,\r\n      title,\r\n      template,\r\n      tools,\r\n      templateContructor,\r\n      toolsInfo,\r\n      onChange,\r\n      insertBeforeDialog,\r\n    } = this.props;\r\n    insertBeforeDialog = insertBeforeDialog || null;\r\n\r\n    const alertId = String(id).concat(\"-alert\");\r\n    const uniqueProp = toolsInfo[0].prop;\r\n\r\n    const getAllTools = () => [].concat(tools).concat(customTools);\r\n\r\n    const nameExists = (name, tools) => {\r\n      let found = 0;\r\n      for (const tool of tools) {\r\n        if (name === tool[uniqueProp]) {\r\n          found++;\r\n        }\r\n      }\r\n\r\n      return found > 1;\r\n    };\r\n\r\n    return (\r\n      <div>\r\n        <Dialog\r\n          id={id}\r\n          title={title}\r\n          confirmText=\"Добавить\"\r\n          onConfirm={() => {\r\n            let tool = { ...template };\r\n            if (templateContructor) {\r\n              tool = new templateContructor();\r\n            }\r\n\r\n            toolsInfo\r\n              .map((info) => info.prop)\r\n              .map((prop, index) => {\r\n                if (prop === uniqueProp) {\r\n                  const suffix = customTools.length + 1;\r\n                  tool[prop] = `Инструмент ${suffix > 1 ? suffix : \"\"}`.trim();\r\n                } else {\r\n                  tool[prop] = template[prop];\r\n                }\r\n              });\r\n\r\n            while (nameExists(tool[uniqueProp], getAllTools())) {\r\n              const found = tool[uniqueProp].match(/\\d+$/g);\r\n              if (found) {\r\n                const end = tool[uniqueProp].match(/\\d+$/g)[0];\r\n                tool[uniqueProp] = tool[uniqueProp].replace(\r\n                  end,\r\n                  Number(end) + 1\r\n                );\r\n              } else {\r\n                tool[uniqueProp] += \" 2\";\r\n              }\r\n            }\r\n\r\n            customTools.push(tool);\r\n            this.setState(\r\n              {\r\n                customTools,\r\n                changed: true,\r\n                showMax: Infinity,\r\n              },\r\n              () => {\r\n                const currentDialog = dialogAPI.getCurrentDialog();\r\n                const tableWrap =\r\n                  currentDialog.querySelector(\".config-table-wrap\");\r\n                tableWrap.scrollTop = 99999;\r\n              }\r\n            );\r\n          }}\r\n          cancelClass={changed ? \"custom-btn--filled\" : \"\"}\r\n          cancelText=\"Сохранить\"\r\n          onCancel={() => {\r\n            onChange(customTools);\r\n            this.setState({ changed: false });\r\n            return true;\r\n          }}\r\n          onClose={() => {\r\n            if (changed) {\r\n              this.setState({\r\n                alertText:\r\n                  \"Вы уверены, что хотите выйти? Все несохраненные изменения будут потеряны\",\r\n              });\r\n              dialogAPI.open(alertId);\r\n            } else {\r\n              return true;\r\n            }\r\n          }}\r\n          ref={this.ref}\r\n        >\r\n          <Stack className=\"config\">\r\n            {/* Самый идиотский костыль, который я когда-либо придумывал */}\r\n            {insertBeforeDialog}\r\n\r\n            <Input\r\n              className=\"config__search\"\r\n              placeholder=\"Фильтр по названию\"\r\n              onChange={(e) => {\r\n                const filter = e.target.value;\r\n                this.setState({ filter });\r\n              }}\r\n            />\r\n\r\n            <div\r\n              className=\"config-table-wrap\"\r\n              onScroll={(e) => {\r\n                const scrollTopMax =\r\n                  e.target.querySelector(\"table\").offsetHeight -\r\n                  e.target.offsetHeight * 1.5;\r\n                if (\r\n                  e.target.scrollTop > scrollTopMax &&\r\n                  showMax < getAllTools().length\r\n                ) {\r\n                  this.setState({ showMax: showMax + 40 });\r\n                }\r\n              }}\r\n            >\r\n              <table className=\"table\">\r\n                <thead className=\"table-header\">\r\n                  <tr className=\"table-tr\">\r\n                    {toolsInfo\r\n                      .map((info) => info.name)\r\n                      .map((name, index) => (\r\n                        <th\r\n                          style={{ minWidth: index == 0 ? \"14em\" : \"\" }}\r\n                          className=\"config-th table-th\"\r\n                        >\r\n                          {name}\r\n                        </th>\r\n                      ))}\r\n                    {customTools && customTools.length ? (\r\n                      <th className=\"config-th\"></th>\r\n                    ) : null}\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"table-body\">\r\n                  {tools &&\r\n                    tools\r\n                      .filter(\r\n                        (tool) =>\r\n                          tool\r\n                            .toString()\r\n                            .toLowerCase()\r\n                            .indexOf(filter.toLowerCase()) > -1\r\n                      )\r\n                      .slice(0, showMax)\r\n                      .map((tool, index) => (\r\n                        <tr className=\"config-tr\" key={index}>\r\n                          {toolsInfo\r\n                            .map((info) => info.prop)\r\n                            .map((prop, i) => (\r\n                              <td key={i} className=\"table-td\">\r\n                                {prop == uniqueProp ? (\r\n                                  <span title={tool.toString()}>\r\n                                    {croppString(tool[prop], 27)}\r\n                                  </span>\r\n                                ) : (\r\n                                  tool[prop]\r\n                                )}\r\n                              </td>\r\n                            ))}\r\n                        </tr>\r\n                      ))}\r\n                  {(() => {\r\n                    let onBlur = (val, index, prop) => {\r\n                      // Do nothing if input stays unchanged\r\n                      if (customTools[index][prop] === val) {\r\n                        return;\r\n                      }\r\n\r\n                      customTools[index][prop] = val;\r\n                      if (prop === uniqueProp) {\r\n                        while (\r\n                          nameExists(customTools[index][prop], getAllTools())\r\n                        ) {\r\n                          const found = customTools[index][prop].match(/\\d+$/g);\r\n                          if (found) {\r\n                            const end =\r\n                              customTools[index][prop].match(/\\d+$/g)[0];\r\n                            customTools[index][prop] = customTools[index][\r\n                              prop\r\n                            ].replace(end, Number(end) + 1);\r\n                          } else {\r\n                            customTools[index][prop] += \" 2\";\r\n                          }\r\n                        }\r\n                      }\r\n\r\n                      this.setState({ customTools, changed: true });\r\n                    };\r\n\r\n                    return (\r\n                      customTools &&\r\n                      customTools.slice(0, showMax).map((tool, index) => (\r\n                        <tr className=\"config-tr\" key={index}>\r\n                          {toolsInfo\r\n                            .map((info) => info.prop)\r\n                            .map((prop, i) => (\r\n                              <td key={i} className=\"table-td\">\r\n                                {(() => {\r\n                                  const value = tool[prop];\r\n                                  return typeof value == \"string\" ? (\r\n                                    <Input\r\n                                      key={value + Math.random()}\r\n                                      defaultValue={value}\r\n                                      onKeyDown={(e) => {\r\n                                        if (\r\n                                          [\r\n                                            13, // Enter\r\n                                            27, // Escape\r\n                                          ].indexOf(e.keyCode) > -1\r\n                                        ) {\r\n                                          e.target.blur();\r\n                                        }\r\n                                      }}\r\n                                      onBlur={(e) =>\r\n                                        onBlur(e.target.value, index, prop)\r\n                                      }\r\n                                    />\r\n                                  ) : (\r\n                                    <NumericInput\r\n                                      key={value + Math.random()}\r\n                                      defaultValue={value}\r\n                                      unsigned=\"true\"\r\n                                      min={1}\r\n                                      onBlur={(val) => onBlur(val, index, prop)}\r\n                                    />\r\n                                  );\r\n                                })()}\r\n                              </td>\r\n                            ))}\r\n\r\n                          <CrossButton\r\n                            className=\"config__delete\"\r\n                            onClick={(e) => {\r\n                              customTools.splice(index, 1);\r\n                              this.setState({ customTools, changed: true });\r\n                            }}\r\n                          />\r\n                        </tr>\r\n                      ))\r\n                    );\r\n                  })()}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </Stack>\r\n        </Dialog>\r\n\r\n        <Dialog\r\n          id={alertId}\r\n          title=\"Сообщение\"\r\n          confirmText=\"ОК\"\r\n          onConfirm={(e) => {\r\n            dialogAPI.close(id);\r\n            return true;\r\n          }}\r\n          cancelText=\"Отмена\"\r\n        >\r\n          {alertText}\r\n        </Dialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default memo(Config, (prevProps, nextProps) => {\r\n  return (\r\n    isEqual(prevProps.tools, nextProps.tools) &&\r\n    isEqual(prevProps.customTools, nextProps.customTools)\r\n  );\r\n});\r\n","export default function formatNumber(number = 0) {\r\n  var chunks = String(number).split(\".\");\r\n  var result = chunks[0].replace(/(\\d)(?=(\\d{3})+([^\\d]|$))/g, \"$1 \");\r\n  if (chunks[1]) {\r\n    result += \".\" + chunks[1];\r\n  }\r\n  return result;\r\n}","import React, { useContext, useEffect } from \"react\";\r\nimport { GlobalContext } from \"../context/GlobalState\";\r\n\r\nimport Config from \"./config\";\r\nimport NumericInput from \"./numeric-input\";\r\nimport { Dialog, dialogAPI } from \"./dialog\";\r\nimport { Tool, template } from \"../common/tools\";\r\nimport formatNumber from \"../common/utils/format-number\";\r\nimport CrossButton from \"./cross-button\";\r\n\r\nimport { Row, Col, Radio, Select, Tooltip, Button, Input } from \"antd\";\r\n\r\nimport { SettingFilled, LoadingOutlined } from \"@ant-design/icons\";\r\n\r\nexport const PriceMove = () => {\r\n  const {\r\n    investorInfo,\r\n    loadTables,\r\n    iterationQty,\r\n    stopValue,\r\n    minYield,\r\n    yieldStep,\r\n    adrMode,\r\n    setAdrMode,\r\n    tools,\r\n    customTools,\r\n    setCustomTools,\r\n    setInitialState,\r\n    loading,\r\n    saves,\r\n    currentSaveIdx,\r\n    setCurrentSaveIdx,\r\n    getSaves,\r\n    getSave,\r\n    snapshotIsChanged,\r\n    snapshotIsSaved,\r\n    addSave,\r\n    updateSave,\r\n    deleteSave,\r\n    updateDeposit,\r\n    getTools,\r\n    getInvestorInfo,\r\n    setIsLoading,\r\n  } = useContext(GlobalContext);\r\n\r\n  const loadData = async () => {\r\n    await setIsLoading(true);\r\n    await Promise.all([getInvestorInfo(), getTools()]);\r\n    await getSaves();\r\n    await setIsLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n    setInterval(getTools, 120000);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (currentSaveIdx === 0) {\r\n      setInitialState();\r\n    } else {\r\n      setCurrentSaveIdx(currentSaveIdx);\r\n      let id = saves[currentSaveIdx - 1].id;\r\n      getSave(id);\r\n    }\r\n  }, [saves.length, currentSaveIdx]);\r\n\r\n  const pageTitle = () => {\r\n    let title = \"ИП Аналитика\";\r\n\r\n    if (!loading && saves[currentSaveIdx - 1]) {\r\n      title = saves[currentSaveIdx - 1].name;\r\n    }\r\n\r\n    return title;\r\n  };\r\n\r\n  const formSnapshot = () => {\r\n    return {\r\n      investorInfo,\r\n      adrMode,\r\n      iterationQty,\r\n      stopValue,\r\n      minYield,\r\n      yieldStep,\r\n      loadTables,\r\n      customTools,\r\n    };\r\n  };\r\n\r\n  return (\r\n    <section className=\"price-move\">\r\n      <div className=\"main-top\">\r\n        <div className=\"container\">\r\n          <div className=\"main-top-wrap\">\r\n            {(() => {\r\n              return (\r\n                <label className=\"labeled-select main-top__select stack-exception\">\r\n                  <span className=\"labeled-select__label labeled-select__label--hidden\">\r\n                    Сохраненный калькулятор\r\n                  </span>\r\n\r\n                  <Select\r\n                    disabled={loading}\r\n                    loading={loading}\r\n                    value={loading ? 0 : currentSaveIdx}\r\n                    onSelect={(idx) => {\r\n                      if (idx === 0) {\r\n                        setInitialState();\r\n                      } else {\r\n                        setCurrentSaveIdx(idx);\r\n                        let id = saves[idx - 1].id;\r\n                        getSave(id);\r\n                      }\r\n                    }}\r\n                  >\r\n                    <Select.Option key={0} value={0}>\r\n                      {loading ? \"Загрузка...\" : \"Не выбрано\"}\r\n                    </Select.Option>\r\n                    {saves.map((save, index) => (\r\n                      <Select.Option key={index + 1} value={index + 1}>\r\n                        {save.name}\r\n                      </Select.Option>\r\n                    ))}\r\n                  </Select>\r\n                </label>\r\n              );\r\n            })()}\r\n            <div className=\"page__title-wrap\">\r\n              <h1 className=\"page__title\">{pageTitle()}</h1>\r\n              <div className=\"page__title-icon-wrap\">\r\n                {loading ? (\r\n                  <LoadingOutlined />\r\n                ) : currentSaveIdx !== 0 ? (\r\n                  <CrossButton\r\n                    className=\"main-top__remove\"\r\n                    onClick={(e) => dialogAPI.open(\"dialog4\", e.target)}\r\n                  />\r\n                ) : null}\r\n              </div>\r\n            </div>\r\n            <Row>\r\n              <Col md={24} xs={0}>\r\n                <Radio.Group\r\n                  className=\"tabs\"\r\n                  value={adrMode}\r\n                  name=\"radiogroup\"\r\n                  onChange={(e) => setAdrMode(e.target.value)}\r\n                >\r\n                  <Radio className=\"selector\" value=\"day\">\r\n                    Дневной\r\n                    <span className=\"prefix\">ход цены</span>\r\n                  </Radio>\r\n                  <Radio className=\"selector middle\" value=\"week\">\r\n                    Недельный\r\n                    <span className=\"prefix\">ход цены</span>\r\n                  </Radio>\r\n                  <Radio className=\"selector\" value=\"month\">\r\n                    Месячный\r\n                    <span className=\"prefix\">ход цены</span>\r\n                  </Radio>\r\n                </Radio.Group>\r\n              </Col>\r\n\r\n              <Col xs={24} md={0}>\r\n                <Select\r\n                  style={{ width: \"100%\" }}\r\n                  value={adrMode}\r\n                  onChange={(mode) => setAdrMode(mode)}\r\n                >\r\n                  <Select.Option value=\"day\">Дневной</Select.Option>\r\n                  <Select.Option value=\"week\">Недельный</Select.Option>\r\n                  <Select.Option value=\"month\">Месячный</Select.Option>\r\n                </Select>\r\n              </Col>\r\n            </Row>\r\n\r\n            <Row>\r\n              <Col xs={24}>\r\n                <div className=\"main-top__footer_wrap\">\r\n                  <div className=\"main-top__footer\">\r\n                    <Button\r\n                      className={`custom-btn custom-btn--secondary main-top__save ${\r\n                        saves.length &&\r\n                        snapshotIsChanged &&\r\n                        currentSaveIdx !== 0\r\n                          ? \"main-top__new\"\r\n                          : \"\"\r\n                      }`}\r\n                      onClick={(e) => {\r\n                        if (\r\n                          saves.length &&\r\n                          snapshotIsChanged &&\r\n                          currentSaveIdx !== 0\r\n                        ) {\r\n                          let save = saves[currentSaveIdx - 1];\r\n                          updateSave({\r\n                            id: save.id,\r\n                            name: save.name,\r\n                            static: JSON.stringify(formSnapshot()),\r\n                          });\r\n                        } else {\r\n                          dialogAPI.open(\"dialog1\", e.target);\r\n                        }\r\n                      }}\r\n                    >\r\n                      {(!snapshotIsSaved && snapshotIsChanged) ||\r\n                      currentSaveIdx == 0\r\n                        ? \"Сохранить\"\r\n                        : \"Изменить\"}\r\n                    </Button>\r\n\r\n                    {saves.length > 0 ? (\r\n                      <a\r\n                        className=\"custom-btn custom-btn--secondary main-top__save\"\r\n                        href=\"#pure=true\"\r\n                        target=\"_blank\"\r\n                      >\r\n                        Добавить новый\r\n                      </a>\r\n                    ) : null}\r\n                  </div>\r\n\r\n                  <Tooltip\r\n                    title=\"Настройки\"\r\n                    overlayStyle={{ fontSize: \"1.25em\" }}\r\n                  >\r\n                    <button\r\n                      className=\"settings-button js-open-modal main-top__settings\"\r\n                      onClick={(e) => dialogAPI.open(\"config\", e.target)}\r\n                    >\r\n                      <span className=\"visually-hidden\">Открыть конфиг</span>\r\n                      <SettingFilled className=\"settings-button__icon\" />\r\n                    </button>\r\n                  </Tooltip>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n\r\n            {(() => {\r\n              let namesTaken = saves.map((save) => save.name);\r\n              let currentName = currentSaveIdx\r\n                ? pageTitle()\r\n                : \"Новое сохранение\";\r\n\r\n              function validate(str = \"\") {\r\n                str = str.trim();\r\n\r\n                let errors = [];\r\n\r\n                let test = /[\\!\\?\\@\\#\\$\\%\\^\\&\\*\\+\\=\\`\\\"\\\"\\;\\:\\<\\>\\{\\}\\~]/g.exec(\r\n                  str\r\n                );\r\n                if (str.length < 3) {\r\n                  errors.push(\"Имя должно содержать не меньше трех символов!\");\r\n                } else if (test) {\r\n                  errors.push(`Нельзя использовать символ \"${test[0]}\"!`);\r\n                }\r\n                if (namesTaken.indexOf(str) > -1) {\r\n                  errors.push(`Сохранение с таким именем уже существует!`);\r\n                }\r\n\r\n                return errors;\r\n              }\r\n\r\n              class ValidatedInput extends React.Component {\r\n                constructor(props) {\r\n                  super(props);\r\n\r\n                  let { defaultValue } = props;\r\n\r\n                  this.state = {\r\n                    error: \"\",\r\n                    value: defaultValue || \"\",\r\n                  };\r\n                }\r\n\r\n                vibeCheck() {\r\n                  const { validate } = this.props;\r\n                  let { value } = this.state;\r\n\r\n                  let errors = validate(value);\r\n                  this.setState({ error: errors.length > 0 ? errors[0] : \"\" });\r\n                  return errors;\r\n                }\r\n\r\n                render() {\r\n                  const { validate, label } = this.props;\r\n                  const { value, error } = this.state;\r\n\r\n                  return (\r\n                    <label className=\"save-modal__input-wrap\">\r\n                      {label ? (\r\n                        <span className=\"save-modal__input-label\">{label}</span>\r\n                      ) : null}\r\n                      <Input\r\n                        className={[\"save-modal__input\"]\r\n                          .concat(error ? \"error\" : \"\")\r\n                          .join(\" \")\r\n                          .trim()}\r\n                        autoComplete=\"off\"\r\n                        autoCorrect=\"off\"\r\n                        autoCapitalize=\"off\"\r\n                        spellCheck=\"false\"\r\n                        value={value}\r\n                        maxLength={20}\r\n                        onChange={(e) => {\r\n                          let { value } = e.target;\r\n                          let { onChange } = this.props;\r\n\r\n                          this.setState({ value });\r\n\r\n                          if (onChange) {\r\n                            onChange(value);\r\n                          }\r\n                        }}\r\n                        onKeyDown={(e) => {\r\n                          // Enter\r\n                          if (e.keyCode === 13) {\r\n                            let { value } = e.target;\r\n                            let { onBlur } = this.props;\r\n\r\n                            let errors = validate(value);\r\n                            if (errors.length === 0) {\r\n                              if (onBlur) {\r\n                                onBlur(value);\r\n                              }\r\n                            }\r\n\r\n                            this.setState({\r\n                              error: errors.length > 0 ? errors[0] : \"\",\r\n                            });\r\n                          }\r\n                        }}\r\n                        onBlur={() => {\r\n                          this.vibeCheck();\r\n                        }}\r\n                      />\r\n\r\n                      <span\r\n                        className={[\"save-modal__error\"]\r\n                          .concat(error ? \"visible\" : \"\")\r\n                          .join(\" \")\r\n                          .trim()}\r\n                      >\r\n                        {error}\r\n                      </span>\r\n                    </label>\r\n                  );\r\n                }\r\n              }\r\n\r\n              return (\r\n                <Dialog\r\n                  id=\"dialog1\"\r\n                  className=\"save-modal\"\r\n                  title={\"Сохранение\"}\r\n                  onConfirm={() => {\r\n                    if (validate(currentName).length) {\r\n                      console.error(validate(currentName)[0]);\r\n                    } else {\r\n                      if (\r\n                        (!snapshotIsSaved && snapshotIsChanged) ||\r\n                        currentSaveIdx === 0\r\n                      ) {\r\n                        addSave({\r\n                          name: currentName,\r\n                          static: JSON.stringify(formSnapshot()),\r\n                        });\r\n                      } else {\r\n                        let save = saves[currentSaveIdx - 1];\r\n                        updateSave({\r\n                          id: save.id,\r\n                          name: currentName,\r\n                          static: JSON.stringify(formSnapshot()),\r\n                        });\r\n                      }\r\n                      return true;\r\n                    }\r\n                  }}\r\n                >\r\n                  <ValidatedInput\r\n                    label=\"Название сохранения\"\r\n                    validate={validate}\r\n                    defaultValue={currentName}\r\n                    onChange={(val) => (currentName = val)}\r\n                    onBlur={() => {}}\r\n                  />\r\n                </Dialog>\r\n              );\r\n            })()}\r\n            {/* Save Popup */}\r\n\r\n            <Dialog\r\n              id=\"dialog4\"\r\n              title=\"Удаление трейдометра\"\r\n              confirmText={\"Удалить\"}\r\n              onConfirm={() => {\r\n                deleteSave(saves[currentSaveIdx - 1].id);\r\n                return true;\r\n              }}\r\n            >\r\n              Вы уверены, что хотите удалить {pageTitle()}?\r\n            </Dialog>\r\n            {/* Delete Popup */}\r\n\r\n            <Config\r\n              id=\"config\"\r\n              title=\"Инструменты\"\r\n              template={template}\r\n              templateContructor={Tool}\r\n              tools={tools}\r\n              toolsInfo={[\r\n                { name: \"Инструмент\", prop: \"fullName\" },\r\n                { name: \"Код\", prop: \"code\" },\r\n                { name: \"Цена шага\", prop: \"stepPrice\" },\r\n                { name: \"Шаг цены\", prop: \"priceStep\" },\r\n                { name: \"ГО\", prop: \"guarantee\" },\r\n                { name: \"Текущая цена\", prop: \"currentPrice\" },\r\n                { name: \"Размер лота\", prop: \"lotSize\" },\r\n                { name: \"Курс доллара\", prop: \"dollarRate\" },\r\n                { name: \"ADR\", prop: \"adrDay\" },\r\n                { name: \"ADR неделя\", prop: \"adrWeek\" },\r\n                { name: \"ADR месяц\", prop: \"adrMonth\" },\r\n              ]}\r\n              customTools={customTools}\r\n              onChange={(customTools) => setCustomTools(customTools)}\r\n              insertBeforeDialog={\r\n                <label className=\"input-group input-group--fluid ksd-config__depo\">\r\n                  <span className=\"input-group__label\">Размер депозита:</span>\r\n                  <NumericInput\r\n                    className=\"input-group__input\"\r\n                    defaultValue={investorInfo.deposit}\r\n                    format={formatNumber}\r\n                    min={10000}\r\n                    max={Infinity}\r\n                    onBlur={(val) => {\r\n                      if (val !== investorInfo.deposit) updateDeposit(val);\r\n                    }}\r\n                  />\r\n                </label>\r\n              }\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n","import React, { useContext, useState, useEffect, useRef } from \"react\";\r\nimport { GlobalContext } from \"../context/GlobalState\";\r\nimport { Col, Row } from \"antd\";\r\nimport { InputNumber } from \"antd4\";\r\n\r\nexport const DataInputs = () => {\r\n  const {\r\n    iterationQty,\r\n    setIterationQty,\r\n    stopValue,\r\n    setStopValue,\r\n    minYield,\r\n    setMinYield,\r\n    yieldStep,\r\n    setYieldStep,\r\n  } = useContext(GlobalContext);\r\n\r\n  const iterationQtyRef = useRef(null);\r\n  const stopValueRef = useRef(null);\r\n  const minYieldRef = useRef(null);\r\n  const yieldStepRef = useRef(null);\r\n\r\n  const [iterationQtyLocal, setIterationQtyLocal] = useState(iterationQty);\r\n  const [stopValueLocal, setStopValueLocal] = useState(stopValue);\r\n  const [minYieldLocal, setMinYieldLocal] = useState(minYield);\r\n  const [yieldStepLocal, setYieldStepLocal] = useState(yieldStep);\r\n\r\n  useEffect(() => {\r\n    setIterationQtyLocal(iterationQty);\r\n  }, [iterationQty]);\r\n\r\n  useEffect(() => {\r\n    setStopValueLocal(stopValue);\r\n  }, [stopValue]);\r\n\r\n  useEffect(() => {\r\n    setMinYieldLocal(minYield);\r\n  }, [minYield]);\r\n\r\n  useEffect(() => {\r\n    setYieldStepLocal(yieldStep);\r\n  }, [yieldStep]);\r\n\r\n  const parser = (value) => {\r\n    if (typeof value === \"string\" && !value.length) {\r\n      value = \"0.00\";\r\n    }\r\n    return value.replace(/[^\\d.]|\\.(?=.*\\.)/g, \"\");\r\n  };\r\n\r\n  const handleKeyboard = (key, inputRef) => {\r\n    const codes = [\"Enter\", \"NumpadEnter\", \"Escape\"];\r\n    if (codes.includes(key.code)) {\r\n      inputRef.current.blur();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className=\"data-inputs\">\r\n      <div className=\"container\">\r\n        <Row gutter={[20]}>\r\n          <Col xs={24} md={12} lg={6}>\r\n            <p>Итераций</p>\r\n            <InputNumber\r\n              ref={iterationQtyRef}\r\n              size=\"large\"\r\n              min={1}\r\n              step={1}\r\n              precision={0}\r\n              value={iterationQtyLocal}\r\n              onChange={setIterationQtyLocal}\r\n              onKeyDown={(key) => handleKeyboard(key, iterationQtyRef)}\r\n              onStep={async (value) => {\r\n                await setIterationQtyLocal(value);\r\n                await iterationQtyRef.current.blur();\r\n              }}\r\n              onBlur={() => setIterationQty(iterationQtyLocal)}\r\n            />\r\n          </Col>\r\n          <Col xs={24} md={12} lg={6}>\r\n            <p>Стоп</p>\r\n            <InputNumber\r\n              ref={stopValueRef}\r\n              size=\"large\"\r\n              min={0.01}\r\n              step={0.01}\r\n              precision={2}\r\n              formatter={(value) => `${value}%`}\r\n              parser={parser}\r\n              value={stopValueLocal}\r\n              onChange={setStopValueLocal}\r\n              onKeyDown={(key) => handleKeyboard(key, stopValueRef)}\r\n              onStep={async (value) => {\r\n                await setStopValueLocal(value);\r\n                await stopValueRef.current.blur();\r\n              }}\r\n              onBlur={() => setStopValue(stopValueLocal)}\r\n            />\r\n          </Col>\r\n          <Col xs={24} md={12} lg={6}>\r\n            <p>Мин. доходность</p>\r\n            <InputNumber\r\n              ref={minYieldRef}\r\n              size=\"large\"\r\n              min={0.01}\r\n              step={0.01}\r\n              precision={2}\r\n              formatter={(value) => `${value}%`}\r\n              parser={parser}\r\n              value={minYieldLocal}\r\n              onChange={setMinYieldLocal}\r\n              onKeyDown={(key) => handleKeyboard(key, minYieldRef)}\r\n              onStep={async (value) => {\r\n                await setMinYieldLocal(value);\r\n                await minYieldRef.current.blur();\r\n              }}\r\n              onBlur={() => setMinYield(minYieldLocal)}\r\n            />\r\n          </Col>\r\n          <Col xs={24} md={12} lg={6}>\r\n            <p>Шаг доходности</p>\r\n            <InputNumber\r\n              ref={yieldStepRef}\r\n              size=\"large\"\r\n              min={0.01}\r\n              step={0.01}\r\n              precision={2}\r\n              formatter={(value) => `${value}%`}\r\n              parser={parser}\r\n              value={yieldStepLocal}\r\n              onChange={setYieldStepLocal}\r\n              onKeyDown={(key) => handleKeyboard(key, yieldStepRef)}\r\n              onStep={async (value) => {\r\n                await setYieldStepLocal(value);\r\n                await yieldStepRef.current.blur();\r\n              }}\r\n              onBlur={() => setYieldStep(yieldStepLocal)}\r\n            />\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n","export function numWithSpaces(n) {\r\n    return n.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\r\n}","/**\r\n * @param {number} number\r\n */\r\nexport default function sortInputFirst(searchVal, options) {\r\n  return options.sort((a, b) => {\r\n    a = a.label.substr(0, searchVal.length).toLowerCase();\r\n    b = b.label.substr(0, searchVal.length).toLowerCase();\r\n    searchVal = searchVal.toLowerCase();\r\n\r\n    if (a == searchVal) {\r\n      if (b != searchVal) return -1;\r\n    } else if (b == searchVal) return 1;\r\n    return a < b ? -1 : a > b ? 1 : 0;\r\n  });\r\n}\r\n","import React, { useContext, useRef, useState } from \"react\";\r\nimport { GlobalContext } from \"../context/GlobalState\";\r\nimport { numWithSpaces } from \"../utils/format\";\r\nimport { Select } from \"antd\";\r\nimport sortInputFirst from \"../common/utils/sort-input-first\"\r\n\r\nconst { Option } = Select;\r\n\r\nexport const ToolRow = ({ tableIdx, rowIdx, tool, options }) => {\r\n  const { tools, updateTool } = useContext(GlobalContext);\r\n\r\n  const selectRef = useRef(null);\r\n\r\n  const [searchVal, setSearchVal] = useState(\"\");\r\n\r\n  const precision = (x) =>\r\n    x.toString().includes(\".\") ? x.toString().split(\".\").pop().length : 0;\r\n\r\n  const priceStepPrecision = precision(tool.priceStep.toString());\r\n\r\n  return (\r\n    <div className=\"tool-row\">\r\n      <div className=\"col tool\">\r\n        <Select\r\n          ref={selectRef}\r\n          optionFilterProp=\"children\"\r\n          value={tool.idx}\r\n          style={{ width: \"100%\" }}\r\n          dropdownStyle={{ fontFamily: \"Circe\" }}\r\n          onChange={(optionIdx) => {\r\n            updateTool(\r\n              tableIdx,\r\n              rowIdx,\r\n              tools[optionIdx].code,\r\n              tools[optionIdx].ref.toolType\r\n            );\r\n          }}\r\n          showSearch\r\n          onSearch={(value) => setSearchVal(value)}\r\n        >\r\n          {sortInputFirst(searchVal, options).map((option) => (\r\n            <Option key={option.idx} value={option.idx}>\r\n              {option.label}\r\n            </Option>\r\n          ))}\r\n        </Select>\r\n      </div>\r\n      <div className=\"col price-go\">\r\n        <div className=\"row title\">Цена/ГО</div>\r\n        <div className=\"row value\">\r\n          <span className=\"price\">{numWithSpaces(tool.price)}</span>\r\n          <span className=\"go\">\r\n            {\" \"}\r\n            / {numWithSpaces(tool.guarantee.toFixed())}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div className=\"contracts col\">\r\n        <div className=\"row title\">Контракты</div>\r\n        <div className=\"row value\">{tool.contracts}</div>\r\n      </div>\r\n      <div className=\"adr col\">\r\n        <div className=\"row title\">ADR</div>\r\n        <div className=\"row value\">{numWithSpaces(tool.adrValue)}</div>\r\n      </div>\r\n      <div className=\"stop col\">\r\n        <div className=\"row title\">Стоп ₽/$</div>\r\n        <div className=\"row value\">\r\n          {numWithSpaces(tool.stop.toFixed(priceStepPrecision))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport { GlobalContext } from \"../context/GlobalState\";\r\nimport CrossButton from \"./cross-button\";\r\n\r\nexport const StepRow = ({ tableIdx, rowIdx, tool }) => {\r\n  const { investorInfo, iterationQty, loadTables, deleteTool } = useContext(\r\n    GlobalContext\r\n  );\r\n\r\n  const precision = (x) =>\r\n    x.toString().includes(\".\") ? x.toString().split(\".\").pop().length : 0;\r\n\r\n  const priceStepPrecision = precision(tool.priceStep.toString());\r\n\r\n  const calcStepValues = (steps) => {\r\n    return steps.map((step) => {\r\n      const stepNumber =\r\n        tool.contracts > 0\r\n          ? ((investorInfo.deposit * step * 0.01) /\r\n              (iterationQty * tool.contracts * tool.stepPrice)) *\r\n            tool.priceStep\r\n          : 0;\r\n\r\n      const stepPercent = (stepNumber / tool.adrValue) * 100;\r\n\r\n      const stepLength = 100 - stepPercent;\r\n      return { stepNumber, stepPercent, stepLength };\r\n    });\r\n  };\r\n  const stepValues = calcStepValues(loadTables[tableIdx].steps);\r\n  const extraStepValues = calcStepValues(loadTables[tableIdx].extraSteps);\r\n\r\n  const setColor = (val) => {\r\n    if (val === 0) return \"c-0\";\r\n    else if (val > 0 && val < 10) return \"c-10\";\r\n    else if (val >= 10 && val < 20) return \"c-10-20\";\r\n    else if (val >= 20 && val < 30) return \"c-20-30\";\r\n    else if (val >= 30 && val < 40) return \"c-30-40\";\r\n    else if (val >= 40 && val < 50) return \"c-40-50\";\r\n    else if (val >= 50) return \"c-50-plus\";\r\n  };\r\n\r\n  const toolName =\r\n    tool.ref.toolType === \"futures\" ? tool.shortName : tool.fullName;\r\n\r\n  return (\r\n    <div className=\"step-row\">\r\n      <div className=\"tool-wrap\">\r\n        <div className=\"tool-code\">{`${toolName} (${tool.code})`}</div>\r\n        <div className=\"tools\">\r\n          {stepValues.map((value, idx) => (\r\n            <div key={idx} className={`tool ${setColor(value.stepPercent)}`}>\r\n              <p className=\"step-value\">\r\n                {value.stepNumber.toFixed(priceStepPrecision)}\r\n              </p>\r\n              <p className=\"step-value-percent\">{`${value.stepPercent.toFixed()}%`}</p>\r\n            </div>\r\n          ))}\r\n\r\n          {extraStepValues.map((value, idx) => (\r\n            <div key={idx} className={`tool ${setColor(value.stepPercent)}`}>\r\n              <p className=\"step-value\">\r\n                {value.stepNumber.toFixed(priceStepPrecision)}\r\n              </p>\r\n              <p className=\"step-value-percent\">{`${value.stepPercent.toFixed()}%`}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <CrossButton\r\n        aria-hidden={rowIdx == 0 ? \"true\" : \"false\"}\r\n        className={[\"dashboard-row_delete\"]\r\n          .concat(rowIdx == 0 ? \"invisible\" : \"\")\r\n          .join(\" \")\r\n          .trim()}\r\n        onClick={(e) => deleteTool(tableIdx, rowIdx)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useContext, useState, useRef, useEffect } from \"react\";\r\nimport { GlobalContext } from \"../context/GlobalState\";\r\nimport { InputNumber } from \"antd\";\r\n\r\nexport const ExtraStepInput = ({ tableIdx, columnIdx, step }) => {\r\n  const { loadTables, setExtraStep, deleteExtraStep, loading } =\r\n    useContext(GlobalContext);\r\n  const [stepValue, setStepValue] = useState(step);\r\n\r\n  const inputRef = useRef(null);\r\n\r\n  const table = loadTables[tableIdx];\r\n\r\n  useEffect(async () => {\r\n    setStepValue(step);\r\n  }, [table.extraSteps]);\r\n\r\n  const handleKeyboard = (key) => {\r\n    const codes = [\"Enter\", \"NumpadEnter\", \"Escape\"];\r\n    if (codes.includes(key.code)) {\r\n      inputRef.current.blur();\r\n    }\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    if (stepValue === 0 || !stepValue) {\r\n      deleteExtraStep(tableIdx, columnIdx);\r\n      inputRef.current.focus();\r\n    } else {\r\n      if (stepValue !== table.extraSteps[columnIdx])\r\n        setExtraStep(tableIdx, columnIdx, stepValue);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"step\">\r\n      <InputNumber\r\n        ref={inputRef}\r\n        autoFocus={!loading}\r\n        size=\"large\"\r\n        min={0}\r\n        step={0.01}\r\n        max={100}\r\n        precision={2}\r\n        formatter={(value) => `${value}%`}\r\n        parser={(value) => {\r\n          if (typeof value === \"string\" && !value.length) {\r\n            value = \"0.00\";\r\n          }\r\n          return value.replace(/[^\\d.]|\\.(?=.*\\.)/g, \"\");\r\n        }}\r\n        value={stepValue}\r\n        onChange={setStepValue}\r\n        onKeyDown={handleKeyboard}\r\n        onStep={async (value) => {\r\n          await setStepValue(value);\r\n          await inputRef.current.blur();\r\n        }}\r\n        onBlur={handleBlur}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport { ToolRow } from \"./ToolRow\";\r\nimport { StepRow } from \"./StepRow\";\r\nimport { GlobalContext } from \"../context/GlobalState\";\r\nimport { numWithSpaces } from \"../utils/format\";\r\nimport { ExtraStepInput } from \"./ExtraStepInput\";\r\n\r\nimport { PlusOutlined, MinusOutlined } from \"@ant-design/icons\";\r\n\r\nimport { Row, Col, Button, Switch } from \"antd\";\r\nimport { InputNumber } from \"antd4\";\r\n\r\nexport const LoadTable = ({ tableIdx }) => {\r\n  const {\r\n    tools,\r\n    investorInfo,\r\n    loadTables,\r\n    addLoadTable,\r\n    deleteLoadTable,\r\n    addTool,\r\n    stopValue,\r\n    setLoadValue,\r\n    minYield,\r\n    yieldStep,\r\n    adrMode,\r\n    setGuaranteeMode,\r\n    updateSteps,\r\n    addStepColumn,\r\n  } = useContext(GlobalContext);\r\n\r\n  const table = loadTables[tableIdx];\r\n\r\n  useEffect(() => {\r\n    updateSteps(tableIdx, updatedSteps(table.steps.length));\r\n  }, [minYield, yieldStep]);\r\n\r\n  const tableRef = useRef(null);\r\n  const inputRef = useRef(null);\r\n\r\n  const updatedSteps = (stepsQty) => {\r\n    const steps = [];\r\n    for (let i = 0; i < stepsQty; i++) {\r\n      steps.push(+(minYield + yieldStep * i).toFixed(2));\r\n    }\r\n\r\n    return steps;\r\n  };\r\n\r\n  const load = (investorInfo.deposit * table.loadValue) / 100;\r\n\r\n  const options = tools.map((tool, idx) => {\r\n    const toolName =\r\n      tool.ref.toolType === \"futures\" ? tool.shortName : tool.fullName;\r\n\r\n    return {\r\n      idx: idx,\r\n      label: `${toolName}(${tool.code})`,\r\n    };\r\n  });\r\n\r\n  const matchedTools = [];\r\n  table.selectedTools.map((selectedTool) => {\r\n    tools.map((tool, idx) => {\r\n      if (\r\n        tool.code === selectedTool.code &&\r\n        tool.ref.toolType === selectedTool.toolType\r\n      ) {\r\n        let guarantee;\r\n        if (tool.ref.toolType !== \"futures\") {\r\n          if (investorInfo.status === \"KSUR\" && tool.ref.guarantee.KSUR) {\r\n            guarantee =\r\n              table.guaranteeMode === \"LONG\"\r\n                ? +tool.ref.guarantee.KSUR.LONG\r\n                : +tool.ref.guarantee.KSUR.SHORT;\r\n          } else if (\r\n            investorInfo.status === \"KPUR\" &&\r\n            tool.ref.guarantee.KPUR\r\n          ) {\r\n            guarantee =\r\n              table.guaranteeMode === \"LONG\"\r\n                ? +tool.ref.guarantee.KPUR.LONG\r\n                : +tool.ref.guarantee.KPUR.SHORT;\r\n          } else guarantee = +tool.ref.guarantee.default;\r\n        } else {\r\n          guarantee = +tool.guarantee;\r\n        }\r\n\r\n        const contracts = Math.floor(\r\n          (investorInfo.deposit * table.loadValue) / 100 / guarantee\r\n        );\r\n\r\n        const stop =\r\n          contracts > 0\r\n            ? ((investorInfo.deposit * stopValue * 0.01) /\r\n                (contracts * tool.stepPrice)) *\r\n              tool.priceStep\r\n            : 0;\r\n\r\n        let adrValue;\r\n        switch (adrMode) {\r\n          case \"day\": {\r\n            adrValue = tool.adrDay;\r\n            break;\r\n          }\r\n          case \"week\":\r\n            adrValue = tool.adrWeek;\r\n            break;\r\n          case \"month\":\r\n            adrValue = tool.adrMonth;\r\n            break;\r\n          default:\r\n            adrValue = 0;\r\n        }\r\n\r\n        matchedTools.push({\r\n          ...tool,\r\n          idx,\r\n          price: tool.currentPrice,\r\n          guarantee,\r\n          contracts,\r\n          priceStep: tool.priceStep,\r\n          stepPrice: tool.stepPrice,\r\n          stop,\r\n          adrValue,\r\n        });\r\n      }\r\n    });\r\n  });\r\n\r\n  const [toolsVisible, setToolsVisible] = useState(true);\r\n  const [loadsVisible, setLoadsVisible] = useState(false);\r\n  const [loadValueLocal, setLoadValueLocal] = useState(table.loadValue);\r\n\r\n  useEffect(() => {\r\n    setLoadValueLocal(table.loadValue);\r\n  }, [table]);\r\n\r\n  return (\r\n    <div className=\"container load-table\">\r\n      <Row gutter={[20]}>\r\n        <Col\r\n          xs={24}\r\n          lg={12}\r\n          className={`tools ${toolsVisible ? \"xsVisible\" : \"\"}`}\r\n        >\r\n          <Row gutter={[20]} className=\"load-header\">\r\n            <Col center=\"xs\" xs={24} md={6}>\r\n              <p className=\"load-header_title\">Загрузка</p>\r\n            </Col>\r\n            <Col xs={8} md={6} className=\"load-header_switch\">\r\n              <Switch\r\n                checkedChildren=\"LONG\"\r\n                unCheckedChildren=\"SHORT\"\r\n                checked={table.guaranteeMode === \"LONG\" && true}\r\n                onChange={(checked) => {\r\n                  const mode = checked ? \"LONG\" : \"SHORT\";\r\n                  setGuaranteeMode(tableIdx, mode);\r\n                }}\r\n                disabled={!investorInfo.status}\r\n              />\r\n            </Col>\r\n            <Col xs={8} md={8}>\r\n              <InputNumber\r\n                ref={inputRef}\r\n                size=\"large\"\r\n                min={0.01}\r\n                max={100.0}\r\n                step={0.01}\r\n                precision={2}\r\n                formatter={(value) => `${value}%`}\r\n                parser={(value) => {\r\n                  if (typeof value === \"string\" && !value.length) {\r\n                    value = \"0.00\";\r\n                  }\r\n                  return value.replace(/[^\\d.]|\\.(?=.*\\.)/g, \"\");\r\n                }}\r\n                value={loadValueLocal}\r\n                onChange={setLoadValueLocal}\r\n                onKeyDown={(key) => {\r\n                  const codes = [\"Enter\", \"NumpadEnter\", \"Escape\"];\r\n                  if (codes.includes(key.code)) {\r\n                    inputRef.current.blur();\r\n                  }\r\n                }}\r\n                onStep={async (value) => {\r\n                  await setLoadValueLocal(value);\r\n                  await inputRef.current.blur();\r\n                }}\r\n                onBlur={() => setLoadValue(tableIdx, loadValueLocal)}\r\n              />\r\n            </Col>\r\n            <Col xs={8} md={4}>\r\n              <p className=\"load-value\">{numWithSpaces(load.toFixed())}</p>\r\n            </Col>\r\n          </Row>\r\n          <Row gutter={[8, 0]} className=\"load-tableRow\">\r\n            <Col xs={22} md={23} lg={24}>\r\n              <div className=\"table\">\r\n                <div className=\"thead\">\r\n                  <div className=\"col tool\">Инструмент</div>\r\n                  <div className=\"col\">Цена/ГО</div>\r\n                  <div className=\"col\">Контракты</div>\r\n                  <div className=\"col\">ADR</div>\r\n                  <div className=\"col\">Стоп ₽/$</div>\r\n                </div>\r\n                <div className=\"tbody\">\r\n                  {matchedTools.map((tool, rowIdx) => (\r\n                    <ToolRow\r\n                      key={rowIdx}\r\n                      tableIdx={tableIdx}\r\n                      rowIdx={rowIdx}\r\n                      tool={tool}\r\n                      options={options}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </Col>\r\n            <Col xs={2} md={1} lg={0}>\r\n              <Button\r\n                className=\"table-details-btn table-toggle\"\r\n                onClick={() => {\r\n                  setToolsVisible(false);\r\n                  setLoadsVisible(true);\r\n                }}\r\n              >\r\n                Подробнее\r\n              </Button>\r\n            </Col>\r\n          </Row>\r\n        </Col>\r\n        <Col\r\n          xs={24}\r\n          lg={12}\r\n          className={`loads ${loadsVisible ? \"xsVisible\" : \"\"}`}\r\n        >\r\n          <Row gutter={[8, 0]}>\r\n            <Col xs={2} md={1} lg={0}>\r\n              <Button\r\n                className=\"all-tools-btn table-toggle\"\r\n                onClick={() => {\r\n                  setToolsVisible(true);\r\n                  setLoadsVisible(false);\r\n                }}\r\n              >\r\n                Все инструменты\r\n              </Button>\r\n            </Col>\r\n\r\n            <Col xs={22} md={23} lg={24}>\r\n              <div className=\"table\" ref={tableRef}>\r\n                <div className=\"thead\">\r\n                  <div className=\"stepsRow\">\r\n                    {table.steps.map((step, i) => {\r\n                      return <p className=\"step\" key={i}>{`${step}%`}</p>;\r\n                    })}\r\n                    {table.extraSteps.map((step, columnIdx) => (\r\n                      <ExtraStepInput\r\n                        key={columnIdx}\r\n                        tableIdx={tableIdx}\r\n                        columnIdx={columnIdx}\r\n                        step={step}\r\n                      />\r\n                    ))}\r\n                    {\r\n                      <Button\r\n                        className=\"add-step-column-btn\"\r\n                        onClick={async () => {\r\n                          await addStepColumn(tableIdx);\r\n                          tableRef.current.scrollLeft += 10000;\r\n                        }}\r\n                      >\r\n                        +\r\n                      </Button>\r\n                    }\r\n                  </div>\r\n                  <div className=\"add-step-column-wrap\">\r\n                    <Button\r\n                      className=\"add-step-column-mobile-btn\"\r\n                      onClick={async () => {\r\n                        await addStepColumn(tableIdx);\r\n                        tableRef.current.scrollLeft += 10000;\r\n                      }}\r\n                    >\r\n                      <span className=\"sign\">+</span>\r\n                      <span>Добавить</span>\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n                <div className=\"tbody\">\r\n                  <div className=\"move-header-wrap\">\r\n                    <div className=\"move-header\">Ход</div>\r\n                  </div>\r\n                  {matchedTools.map((tool, rowIdx) => (\r\n                    <StepRow\r\n                      key={rowIdx}\r\n                      tableIdx={tableIdx}\r\n                      rowIdx={rowIdx}\r\n                      tool={tool}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n      <Row gutter={[8, 0]} className=\"func-buttons-row\">\r\n        <Col xs={24} md={8}>\r\n          <Button\r\n            className=\"func-button add-tool-btn\"\r\n            onClick={(e) => addTool(tableIdx)}\r\n          >\r\n            <PlusOutlined aria-label=\"Добавить инструмент\" />\r\n            Инструмент\r\n          </Button>\r\n        </Col>\r\n\r\n        <Col xs={24} md={8}>\r\n          {tableIdx == loadTables.length - 1 ? (\r\n            <Button\r\n              className=\"func-button add-load-table-btn\"\r\n              onClick={(e) => addLoadTable()}\r\n            >\r\n              <PlusOutlined aria-label=\"Добавить загрузку\" />\r\n              Добавить загрузку\r\n            </Button>\r\n          ) : (\r\n            <div style={{ width: 255 }}></div>\r\n          )}\r\n        </Col>\r\n\r\n        <Col xs={24} md={8}>\r\n          {tableIdx > 0 ? (\r\n            <Button\r\n              className=\"func-button delete-load-table-btn\"\r\n              onClick={(e) => deleteLoadTable(tableIdx)}\r\n            >\r\n              <MinusOutlined aria-label=\"Удалить загрузку\" />\r\n              Удалить загрузку\r\n            </Button>\r\n          ) : (\r\n            <div style={{ width: 255 }}></div>\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport { GlobalContext } from \"../context/GlobalState\";\r\nimport { LoadTable } from \"./LoadTable\";\r\nimport { Spin } from \"antd\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\n\r\nexport const LoadTables = () => {\r\n  const { loadTables, loading } = useContext(GlobalContext);\r\n\r\n  let tables = loadTables.map((table, tableIdx) => (\r\n    <LoadTable key={tableIdx} tableIdx={tableIdx} />\r\n  ));\r\n\r\n  const antIcon = <LoadingOutlined spin />;\r\n\r\n  const Loader = () => {\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"load-tables_spin\">\r\n          <Spin indicator={antIcon} />\r\n          Подождите, инструменты загружаются...\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <section className=\"load-tables\">{loading ? <Loader /> : tables}</section>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/nanni.49ad524e.svg\";","import { PriceMove } from \"./components/PriceMove\";\r\nimport { DataInputs } from \"./components/DataInputs\";\r\nimport { LoadTables } from \"./components/LoadTables\";\r\nimport { NanniBot } from \"./components/nanni-bot\";\r\n\r\nimport { GlobalProvider } from \"./context/GlobalState\";\r\n\r\nimport \"antd/dist/antd.css\";\r\nimport \"./App.scss\";\r\n\r\nfunction App() {\r\n  return (\r\n    <GlobalProvider>\r\n      <PriceMove />\r\n      <DataInputs />\r\n      <LoadTables />\r\n      {/* <NanniBot /> */}\r\n    </GlobalProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}